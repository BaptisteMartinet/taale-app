(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{352:function(e,t,n){e.exports=n(419)},371:function(e,t,n){e.exports=n.p+"static/media/slide1.363002c1.png"},372:function(e,t,n){e.exports=n.p+"static/media/slide2.a9c23c2f.png"},373:function(e,t,n){e.exports=n.p+"static/media/slide3.f00edb54.png"},374:function(e,t,n){e.exports=n.p+"static/media/slide4.3ba82faf.png"},375:function(e,t,n){e.exports=n.p+"static/media/slide5.56af1504.png"},376:function(e,t,n){e.exports=n.p+"static/media/slide6.de1ae450.png"},377:function(e,t,n){e.exports=n.p+"static/media/treeBackground.3131d4f0.jpg"},378:function(e,t,n){e.exports=n.p+"static/media/void.3f06e14f.png"},419:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),o=n(456),s=n(338),l=n(455),c=n(264),u=n(243),d=n(31),f=n(217),b={fr:{form:{headlineTitle:"Rebonjour!",headlineDescription:"Connectez-vous \xe0 votre compte",email:"Email",password:"Mot de passe",submit:"Se connecter",forgotPassword:"Mot de passe oubli\xe9",register:"Je n'ai pas de compte"}},en:{form:{headlineTitle:"Welcome back!",headlineDescription:"Sign in to your account",email:"Email",password:"Password",submit:"Sign in",forgotPassword:"Forgot password",register:"I don't have an account"}}},p={fr:{form:{headlineTitle:"Bienvenue sur Taale",headlineDescription:"Cr\xe9er votre compte",username:"Nom d'utilisateur",usernameHelper:"Peut contenir lettres, chiffres et '_' (ex: John_Doe07)",email:"Email",password:"Mot de passe",submit:"Cr\xe9er mon compte",registerSuccess:"Compte cr\xe9\xe9 avec succ\xe8s"}},en:{form:{headlineTitle:"Welcome to Taale!",headlineDescription:"Create an account",username:"Username",usernameHelper:"Can contain letters, numbers and '_' (ex: John_Doe07)",email:"Email",password:"Password",submit:"Sign Up",registerSuccess:"Account successfully created"}}},m={fr:{forgotPasswordForm:{title:"R\xe9initialisez votre mot de passe",subtitle:"Vous allez recevoir un code de validation par email.",emailLabel:"Email",submit:"Envoyer le code"},resetPasswordForm:{title:"R\xe9initialisez votre mot de passe",subtitle:"Veuillez renseigner un nouveau mot de passe.",newPasswordLabel:"Nouveau mot de passe",validationCodeLabel:"Code",submit:"Sauvegarder"}},en:{forgotPasswordForm:{title:"Reset your password",subtitle:"You'll receive a validation code by email.",emailLabel:"Email",submit:"Send verification code"},resetPasswordForm:{title:"Reset your password",subtitle:"Set your new password.",newPasswordLabel:"New password",validationCodeLabel:"Code",submit:"Save"}}},h={fr:{slide1:{title:"Bienvenue sur Taale",description:"Taale est une application d'\xe9criture collaborative ou les utilisateurs participent \xe0 l'\xe9laboration d'une immense fable comportant une infinit\xe9 d'univers paral\xe8lles."},slide2:{title:"L'arbre",description:'On peux representer la Fable comme un gigantesque arbre invers\xe9. La base sera toujours la phrase "Il \xe9tait une fois, " puis les utilisateurs construisent les branches au fil des paragraphes qu\'ils \xe9crivent.'},slide3:{title:"Un cadre limit\xe9",description:"Pour pimenter la chose, les utilisateurs sont plac\xe9s al\xe9atoirement sur une branche et ne peuvent voir que quelques paragraphes au dessus d'eux. Le but \xe9tant de continuer l'histoire tout en gardant son sens."},slide4:{title:"Deviens Taaler",description:"\xc0 chaque fois tu \xe9crit un nouveau paragraphe, tu d\xe9bloque un univers des possibles. Tu te retrouvera certainement dans une des histoires publi\xe9es quotidiennement sur la page d'accueil."},slide5:{title:"Vote !",description:"Si tu pense qu'une certaine phrase termine l'histoire, clique dessus pour voter la fin de la branche. Au contraire, si une phrase ne fait aucun sens ou comporte du contenu injurieux, tu peux la signaler."},slide6:{title:"\xc0 toi de jouer"}},en:{slide1:{title:"Welcome to Taale",description:"Taale is a collaborative writing application where users participate in the development of a massive fable containing an infinite number of parallel universes."},slide2:{title:"The tree",description:"We can represent the Fable as a gigantic inverted tree. The base will always be the sentence 'Once upon a time, ' and then the users will build the branches as they write paragraphs."},slide3:{title:"Limited scope",description:"To add some spice, users are randomly placed on a branch and can only see a few paragraphs above them. The goal is to continue the story while keeping its meaning intact."},slide4:{title:"Become a Taaler",description:"Every time you write a new paragraph, you unlock a universe of possibilities. You may find yourself in one of the stories featured daily on the homepage."},slide5:{title:"Vote!",description:"If you think that a certain sentence ends the story, click on it to vote for the end of the branch. On the contrary, if a phrase doesn't make any sense or contains offensive content, you can report it."},slide6:{title:"Your turn to play"}}},g={fr:{hero:{hello:"Bonjour,",guest:"Invit\xe9"},statistics:{title:"Taale en chiffres",stats:{users:"Utilisateurs",trees:"Arbres (Langues support\xe9es)",stories:"Branches (Histoires cr\xe9es)",sentences:"Feuilles (Paragraphes \xe9crits)"},nullValue:"N/A"},dailyStory:{title:"L'histoire du jour",subtitle:"Une nouvelle histoire tous les jours \xe0 minuit",error:"Une erreur est survenue"},myLibrary:{title:"Biblioth\xe8que",subtitle:"Retrouve toutes tes histoires"},settingsSheet:{title:"Param\xe8tres",actions:"Actions",about:"\xc0 propos",support:"Support",logout:"Se d\xe9connecter",logoutSuccess:"D\xe9connect\xe9 avec succ\xe8s",dangerZone:"Zone de danger",deleteAccount:"Supprimer mon compte",accountDeletionAlert:{title:"Suppression de compte",description:"Cette action est irr\xe9versible et entrainera la suppression de toutes vos donn\xe9es.",cancel:"Retour",submit:"Supprimer"},accountDeletionSuccess:"Compte supprim\xe9 avec succ\xe8s"}},en:{hero:{hello:"Hello,",guest:"Guest"},statistics:{title:"Statistics",stats:{users:"Users",trees:"Trees (Supported languages)",stories:"Branches (Stories)",sentences:"Leafs (Written paragraphs)"},nullValue:"N/A"},dailyStory:{title:"Today's story",subtitle:"A new story every day at midnight",error:"Something went wrong"},myLibrary:{title:"Library",subtitle:"Find all your stories"},settingsSheet:{title:"Settings",actions:"Actions",about:"About",support:"Support",logout:"Logout",logoutSuccess:"Successfully logged out",dangerZone:"Danger zone",deleteAccount:"Delete my account",accountDeletionAlert:{title:"Account deletion",description:"This action is irreversible and will delete all your datas from the application.",cancel:"Cancel",submit:"Delete"},accountDeletionSuccess:"Account successfully deleted"}}},y={fr:{listInfoHeader:"Vous avez \xe9t\xe9 plac\xe9 al\xe9atoirement sur une branche",write:"\xc9crire"},en:{listInfoHeader:"You've been randomly placed on a branch",write:"Write"}},j={fr:{title:"Enregistr\xe9 avec succ\xe8s",partialStoryLink:"C'est reparti",homeLink:"Accueil"},en:{title:"Successfully saved",partialStoryLink:"Let's do it again",homeLink:"Home"}},v={fr:{pageInfo:"Vous trouverez ici toutes les histoires auxquelles vous avez particip\xe9.\nVous comptabilisez {{sentencesCount}} participation(s).",emptyLibrary:"Wow, tellement vide",misc:{dateFormat:"dd/MM/yyyy HH:mm"}},en:{pageInfo:"You'll find here every story you've participated in.\nYou've participated {{sentencesCount}} time(s).",emptyLibrary:"Wow, such empty",misc:{dateFormat:"dd/MM/yyyy hh:mm aaa"}}},O={fr:{completedTitle:"Compl\xe9t\xe9e le",dateFormat:"dd/MM/yy '\xe0' HH:mm"},en:{completedTitle:"Completed the",dateFormat:"dd/MM/yy 'at' hh:mm aaa"}},x={fr:{login:b.fr,register:p.fr,onboarding:h.fr,home:g.fr,partialStory:y.fr,participationSuccess:j.fr,library:v.fr,storyViewer:O.fr,forgotPassword:m.fr},en:{login:b.en,register:p.en,onboarding:h.en,home:g.en,partialStory:y.en,participationSuccess:j.en,library:v.en,storyViewer:O.en,forgotPassword:m.en}},S={fr:{close:"Fermer"},en:{close:"Close"}},w={fr:{backTitle:"Retour",screens:{login:"Se connecter",register:"Cr\xe9er un compte",forgotPassword:"Mot de passe oubli\xe9",partialStory:"Participer",storyViewer:"Lecteur",library:"Biblioth\xe8que"}},en:{backTitle:"Back",screens:{login:"Login",register:"Register",forgotPassword:"Forgot password",partialStory:"Participate",storyViewer:"Reader",library:"Library"}}},P={fr:{report:"Signaler",reportSuccessfull:"Signal\xe9 avec succ\xe8s",markCompleted:"Voter pour terminer",markCompletedSuccessfull:"Vote pris en compte",deletedUser:"Inconnu",misc:{dateFormat:"dd/MM/yy HH:mm"}},en:{report:"Report",reportSuccessfull:"Successfully reported",markCompleted:"Mark completed",markCompletedSuccessfull:"Vote registered",deletedUser:"Unknown",misc:{dateFormat:"dd/MM/yy hh:mm aaa"}}},k={fr:{title:"Rendez-vous sur votre boite mail",subTitle:"Nous vous avons envoy\xe9 un code de v\xe9rification par email.",resendCode:"Renvoyer le code"},en:{title:"Check your email",subTitle:"We've sent you a verification code by email.",resendCode:"Resend code"}},C={fr:{participate:"Participer"},en:{participate:"Participate"}},I={fr:{snackbar:S.fr,app:w.fr,sentencesList:P.fr,codeValidationModal:k.fr,participationFab:C.fr},en:{snackbar:S.en,app:w.en,sentencesList:P.en,codeValidationModal:k.en,participationFab:C.en}},L={fr:{_Default:"Une erreur est survenue",InvalidLoginOrPassword:"Nom d'utilisateur ou mot de passe invalide",InvalidEmailFormat:"Format d'email invalide",EmailTaken:"Adresse email d\xe9j\xe0 utilis\xe9e",InvalidValidationCode:"Code de v\xe9rification invalide",InvalidUsernameLength:"Nom d'utilisateur trop court/long",InvalidUsernameChar:"Le nom d'utilisateur contient un caract\xe8re invalide",UsernameTaken:"Nom d'utilisateur d\xe9j\xe0 utilis\xe9",InvalidSentenceLength:"Taille de paragraphe invalide",ResourceNotFound:"Resource non trouv\xe9e",SpamDetected:"Spam d\xe9tect\xe9",InsufficientPermission:"Permissions insufisantes",InvalidArgument:"Argument invalide",SentenceAlreadyPartOfStory:"Le paragraphe fait d\xe9j\xe0 parti d'une histoire",SentenceAlreadyReported:"Paragraphe d\xe9j\xe0 signal\xe9",SentenceAlreadyMarkedComplete:"Paragraphe d\xe9j\xe0 vot\xe9 comme point de terminaison"},en:{_Default:"An error has occured",InvalidLoginOrPassword:"Invalid login or password",InvalidEmailFormat:"Invalid email format",EmailTaken:"Email already taken",InvalidValidationCode:"Invalid verification code",InvalidUsernameLength:"Username too short/long",InvalidUsernameChar:"Username contains an invalid character",UsernameTaken:"Username already taken",InvalidSentenceLength:"Invalid sentence length",ResourceNotFound:"Resource not found",SpamDetected:"Spam detected",InsufficientPermission:"Insufficient permission",InvalidArgument:"Invalid argument",SentenceAlreadyPartOfStory:"Sentence already part of a story",SentenceAlreadyReported:"Sentence already reported",SentenceAlreadyMarkedComplete:"Sentence already voted as termination point"}},T={fr:{common:I.fr,screens:x.fr,errors:L.fr},en:{common:I.en,screens:x.en,errors:L.en}},A={en:T.en,fr:T.fr};u.default.use(d.initReactI18next).init({resources:A,lng:null==(r=Object(f.getLocales)().at(0))?void 0:r.languageCode,fallbackLng:"en",interpolation:{escapeValue:!1}});var R=u.default,D=n(20),M=n.n(D),V=n(275),E=n(457),q=n(460),B=n(280),F=new RegExp("^\\w{2,24}$"),H={onboarding:{slide1:n(371),slide2:n(372),slide3:n(373),slide4:n(374),slide5:n(375),slide6:n(376)},home:{treeBackground:n(377)},misc:{empty:n(378)}},z=n(226),U=n(143);function $(){return($=M()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.secure;return r&&(yield U.isAvailableAsync())?U.setItemAsync(e,t):z.default.setItem(e,t)}))).apply(this,arguments)}function W(){return(W=M()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.secure;return n&&(yield U.isAvailableAsync())?U.getItemAsync(e):z.default.getItem(e)}))).apply(this,arguments)}function N(){return(N=M()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.secure;return n&&(yield U.isAvailableAsync())?U.deleteItemAsync(e):z.default.removeItem(e)}))).apply(this,arguments)}var _={setItem:function(e,t){return $.apply(this,arguments)},getItem:function(e){return W.apply(this,arguments)},deleteItem:function(e){return N.apply(this,arguments)}},Y=Object(V.createHttpLink)({uri:"https://taale-api.herokuapp.com/"}),J=Object(B.setContext)(function(){var e=M()((function*(e,t){var n,r=t.headers;void 0===r&&(r={});var i=yield _.getItem("auth_token",{secure:!0}),a=null==(n=Object(f.getLocales)().at(0))?void 0:n.languageCode;return null!==i&&(r.authorization="Bearer "+i),a&&(r["content-language"]=a),{headers:r}}));return function(t,n){return e.apply(this,arguments)}}()),Z=new E.ApolloClient({name:"taale-app",version:"1.0",link:J.concat(Y),cache:new q.InMemoryCache({typePolicies:{PublicQuery:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},AuthenticatedQuery:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},PublicMutation:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},AuthenticatedMutation:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}}}})}),G=n(74),K=n(266),Q=n(10),X=n.n(Q),ee=n(11),te=n.n(ee),ne=n(19),re=new Map([["short",1e3],["long",3e3],["long",5e3]]),ie=new(function(){function e(){X()(this,e),this.visible=!1,this.msg="",this.duration=3e3,Object(ne.makeObservable)(this,{visible:ne.observable,msg:ne.observable,duration:ne.observable,display:ne.action,dismiss:ne.action})}return te()(e,[{key:"display",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.msg=e;var r=n.duration;r?this.duration=null!=(t=re.get(r))?t:3e3:3e3!=this.duration&&(this.duration=3e3),this.visible=!0}},{key:"dismiss",value:function(){this.visible=!1}}]),e}()),ae=n(3),oe=Object(G.observer)((function(){var e=Object(d.useTranslation)("common",{keyPrefix:"snackbar"}).t;return Object(ae.jsx)(K.default,{visible:ie.visible,onDismiss:function(){ie.dismiss()},duration:ie.duration,action:{label:e("close"),onPress:function(){ie.dismiss()}},children:ie.msg})})),se=n(4),le=n.n(se),ce=n(1),ue=n(5),de=n(124),fe=n(2),be=n(81),pe=n(25),me=n(72),he=n(61);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=Object(he.observer)((function(e){var t=e.open,n=e.onClose,r=e.animationDuration,i=e.title,o=e.scrollViewProps,s=e.children,l=.75*Object(de.default)().height,c=a.a.useRef(new ue.default.Value(l)).current,u=a.a.useRef(ue.default.timing(c,{toValue:0,duration:r,useNativeDriver:!0})).current,d=a.a.useRef(ue.default.timing(c,{toValue:l,duration:r,useNativeDriver:!0})).current;return a.a.useEffect((function(){t?u.start():d.start()}),[t]),Object(ae.jsxs)(ue.default.View,{style:[ve.container,{height:l,transform:[{translateY:c}]}],children:[Object(ae.jsxs)(fe.default,{style:ve.header,children:[Object(ae.jsx)(pe.default,{variant:"titleLarge",style:ve.title,children:i}),Object(ae.jsx)(me.default,{icon:"close",size:32,style:ve.closeBtn,onPress:n})]}),Object(ae.jsx)(be.default,ye(ye({},o),{},{children:s}))]})})),ve=ce.default.create({container:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#1a1a1d",borderRadius:16,overflow:"hidden"},header:{width:"100%",backgroundColor:"#110f15",paddingVertical:16},title:{textAlign:"center",color:"whitesmoke"},closeBtn:{position:"absolute",color:"whitesmoke",top:2,right:2}}),Oe=je,xe=n(12),Se="android"===xe.default.OS||"ios"===xe.default.OS,we=(xe.default.OS,"macos"===xe.default.OS||xe.default.OS,ce.default.create({container:{flex:1,backgroundColor:"#455d7a"},appWrapper:{width:360,height:"auto",aspectRatio:6/13,margin:"auto",overflow:"hidden",borderRadius:32}})),Pe=function(e){var t=e.children;return Se?Object(ae.jsx)(i.Fragment,{children:t}):Object(ae.jsx)(fe.default,{style:we.container,children:Object(ae.jsx)(fe.default,{style:we.appWrapper,children:t})})},ke=n(454),Ce=n(453),Ie=n(132);function Le(e,t){var n=t.onSuccess,r=t.successMessage,i=t.onError,a=t.errorMessage;return e.then((function(e){return n&&n(e),r&&ie.display(r),e})).catch((function(e){var t;if(i&&i(e),a){switch(typeof a){case"string":return ie.display(a,{duration:"long"});case"boolean":if(!Object(Ie.isApolloError)(e))break;var n=null==(t=e.graphQLErrors.at(0))?void 0:t.extensions.code;if("string"!==typeof n)break;return ie.display(R.t([n,"_Default"],{ns:"errors"}),{duration:"long"})}ie.display(R.t("_Default",{ns:"errors"}),{duration:"long"})}}))}var Te=n(21),Ae=n.n(Te),Re=n(22),De=n.n(Re),Me=n(13),Ve=n.n(Me);function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve()(e);if(t){var i=Ve()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return De()(this,n)}}var qe,Be,Fe=function(e){Ae()(n,e);var t=Ee(n);function n(e,r){var i;return X()(this,n),(i=t.call(this)).fetch=e,i.opts=r,i}return te()(n,[{key:"ensureSuccess",value:function(){return"fulfilled"===this.status?this.result:this.ensureSuccessReload.apply(this,arguments)}},{key:"ensureSuccessReload",value:function(){var e=this.fetch.apply(this,arguments);return this.track(e,this.opts),e}}]),n}(function(){function e(){X()(this,e),this.lastResult=void 0,this.lastError=void 0,this.status=void 0,this.currentPromise=null,Object(ne.makeObservable)(this,{lastResult:ne.observable,lastError:ne.observable,status:ne.observable,setResult:ne.action,setError:ne.action,reset:ne.action,track:ne.action,result:ne.computed,error:ne.computed,tracking:ne.computed,loading:ne.computed,finished:ne.computed})}return te()(e,[{key:"setResult",value:function(e){this.lastResult=e,this.lastError=void 0,this.status="fulfilled"}},{key:"setError",value:function(e){this.lastError=e,this.lastResult=void 0,this.status="rejected"}},{key:"reset",value:function(){this.lastResult=void 0,this.lastError=void 0,this.status=void 0,this.currentPromise=null}},{key:"result",get:function(){if("pending"!==this.status)return this.lastResult}},{key:"error",get:function(){if("pending"!==this.status)return this.lastError}},{key:"tracking",get:function(){return void 0!==this.status}},{key:"loading",get:function(){return"pending"===this.status}},{key:"finished",get:function(){return"fulfilled"===this.status||"rejected"===this.status}},{key:"track",value:function(e,t){var n=this,r=t.thenUnhandled,i=t.thenDropped,a=t.catchUnhandled,o=t.catchDropped,s=t.finallyUnhandled,l=t.finallyDropped;this.currentPromise=e,this.status="pending",e.then((function(t){e===n.currentPromise?(n.setResult(t),null==r||r(t)):null==i||i(t)})).catch((function(t){e===n.currentPromise?(n.setError(t),null==a||a(t)):null==o||o(t)})).finally((function(){e==n.currentPromise?null==s||s():null==l||l()}))}}]),e}()),He=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];X()(this,e),this.isOpen=t,Object(ne.makeObservable)(this,{isOpen:ne.observable,open:ne.action.bound,close:ne.action.bound,toggle:ne.action.bound})}return te()(e,[{key:"open",value:function(){this.isOpen=!0}},{key:"close",value:function(){this.isOpen=!1}},{key:"toggle",value:function(){this.isOpen=!this.isOpen}}]),e}(),ze=function(){function e(){X()(this,e),this.loading=!1,Object(ne.makeObservable)(this,{loading:ne.observable,setLoading:ne.action,setLoaded:ne.action})}return te()(e,[{key:"setLoading",value:function(){this.loading=!0}},{key:"setLoaded",value:function(){this.loading=!1}}]),e}(),Ue=n(39),$e=n.n(Ue),We=n(448),Ne=Object(We.gql)(qe||(qe=$e()(["\nquery DailyStory {\n  public {\n    dailyStory {\n      id\n      createdAt\n    }\n  }\n}\n"])));function _e(){return Ye.apply(this,arguments)}function Ye(){return(Ye=M()((function*(){return(yield Z.query({query:Ne})).data.public.dailyStory}))).apply(this,arguments)}var Je=Object(We.gql)(Be||(Be=$e()(["\nquery GetStatistics {\n  public {\n    statistics {\n      users\n      openTrees\n      stories\n      sentences\n    }\n  }\n}\n"])));function Ze(){return Ge.apply(this,arguments)}function Ge(){return(Ge=M()((function*(){return(yield Z.query({query:Je,fetchPolicy:"no-cache"})).data.public.statistics}))).apply(this,arguments)}var Ke,Qe=new(function(){function e(){X()(this,e),this.dailyStory=new Fe(_e,{catchUnhandled:console.error}),this.statistics=new Fe(Ze,{catchUnhandled:console.error}),this.settingsOpenState=new He}return te()(e,[{key:"pullRefresh",value:function(){return Promise.all([this.dailyStory.ensureSuccessReload(),this.statistics.ensureSuccessReload()])}},{key:"refresh",value:function(){return Promise.all([this.dailyStory.ensureSuccess(),this.statistics.ensureSuccess()])}}]),e}()),Xe=Object(We.gql)(Ke||(Ke=$e()(["\nquery PartialStory {\n  authenticated {\n    partialStory {\n      id\n      text\n      parentSentenceId\n      owner {\n        id\n        username\n      }\n      createdAt\n      updatedAt\n    }\n  }\n}\n"])));function et(){return tt.apply(this,arguments)}function tt(){return(tt=M()((function*(){return(yield Z.query({query:Xe,fetchPolicy:"no-cache"})).data.authenticated.partialStory}))).apply(this,arguments)}var nt,rt,it=new(function(){function e(){X()(this,e),this.partialStory=new Fe(et,{catchUnhandled:console.error}),Object(ne.makeObservable)(this,{lastSentence:ne.computed})}return te()(e,[{key:"lastSentence",get:function(){var e;return null==(e=this.partialStory.result)?void 0:e.at(-1)}},{key:"refresh",value:function(){return this.partialStory.ensureSuccessReload()}}]),e}()),at=Object(We.gql)(nt||(nt=$e()(["\nquery MyStories {\n  authenticated {\n    myStories {\n      id\n      title\n      createdAt\n    }\n  }\n}\n"])));function ot(){return st.apply(this,arguments)}function st(){return(st=M()((function*(){return(yield Z.query({query:at})).data.authenticated.myStories}))).apply(this,arguments)}var lt=Object(We.gql)(rt||(rt=$e()(["\nquery Statistics {\n  authenticated {\n    statistics {\n      mySentences\n    }\n  }\n}\n"])));function ct(){return ut.apply(this,arguments)}function ut(){return(ut=M()((function*(){return(yield Z.query({query:lt})).data.authenticated.statistics.mySentences}))).apply(this,arguments)}var dt=new(function(){function e(){X()(this,e),this.stories=new Fe(ot,{catchUnhandled:console.error}),this.mySentencesCount=new Fe(ct,{catchUnhandled:console.error})}return te()(e,[{key:"refresh",value:function(){var e=M()((function*(){yield this.stories.ensureSuccessReload(),yield this.mySentencesCount.ensureSuccessReload()}));return function(){return e.apply(this,arguments)}}()}]),e}());function ft(){Le(Qe.refresh(),{successMessage:null,errorMessage:!0})}function bt(){Le(it.refresh(),{successMessage:null,errorMessage:!0})}function pt(){Le(dt.refresh(),{successMessage:null,errorMessage:!0})}var mt,ht,gt=n(106),yt=n.n(gt),jt=Object(We.gql)(mt||(mt=$e()(["\nmutation Login($email: String!, $password: String!) {\n  public {\n    account {\n      login(email: $email, password: $password) {\n        user {\n          id\n          username\n          email\n          role\n          createdAt\n          updatedAt\n        }\n        token\n      }\n    }\n  }\n}\n"])));var vt,Ot=Object(We.gql)(ht||(ht=$e()(["\nmutation Register($username: String!, $email: String!, $password: String!, $emailValidationCode: String!) {\n  public {\n    account {\n      register(username: $username, email: $email, password: $password, emailValidationCode: $emailValidationCode)\n    }\n  }\n}\n"])));function xt(e){return Z.mutate({mutation:Ot,variables:e})}var St,wt=Object(We.gql)(vt||(vt=$e()(["\nquery Account {\n  authenticated {\n    account {\n      id\n      username\n      email\n      role\n      createdAt\n      updatedAt\n    }\n  }\n}\n"])));function Pt(){return(Pt=M()((function*(){return(yield Z.query({query:wt})).data.authenticated.account}))).apply(this,arguments)}var kt,Ct=Object(We.gql)(St||(St=$e()(["\nquery UsernameAvailability($username: String!) {\n  public {\n    account {\n      usernameAvailability(username: $username)\n    }\n  }\n}\n"])));function It(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=M()((function*(e){return(yield Z.query({query:Ct,variables:e})).data.public.account.usernameAvailability}))).apply(this,arguments)}var Tt,At=Object(We.gql)(kt||(kt=$e()(["\nmutation VerifyEmail($email: String!) {\n  public {\n    account {\n      verifyEmail(email: $email)\n    }\n  }\n}\n"])));function Rt(e){return Z.mutate({mutation:At,variables:e})}var Dt,Mt=Object(We.gql)(Tt||(Tt=$e()(["\nmutation($email: String!) {\n  public {\n    account {\n      resendEmailVerificationCode(email: $email)\n    }\n  }\n}\n"])));function Vt(e){return Z.mutate({mutation:Mt,variables:e})}var Et,qt=Object(We.gql)(Dt||(Dt=$e()(["\nmutation DeleteAccount {\n  authenticated {\n    account {\n      deleteAccount\n    }\n  }\n}\n"])));var Bt,Ft=Object(We.gql)(Et||(Et=$e()(["\nmutation ForgotPassword($email: String!) {\n  public {\n    account {\n      forgotPassword(email: $email)\n    }\n  }\n}\n"])));function Ht(e){return Z.mutate({mutation:Ft,variables:e})}var zt=Object(We.gql)(Bt||(Bt=$e()(["\nmutation ResetPassword(\n  $email: String!\n  $newPassword: String!\n  $validationCode: String!\n) {\n  public {\n    account {\n      resetPassword(\n        email: $email\n        newPassword: $newPassword\n        validationCode: $validationCode\n      )\n    }\n  }\n}\n"])));function Ut(e){return Z.mutate({mutation:zt,variables:e})}var $t=new(function(){function e(){X()(this,e),this.user=null,this.register=xt,this.usernameAvailability=It,this.verifyEmail=Rt,this.resendEmailVerificationCode=Vt,this.forgotPassword=Ht,this.resetPassword=Ut,Object(ne.makeObservable)(this,{user:ne.observable,setUser:ne.action,loggedIn:ne.computed,loggedOut:ne.computed})}return te()(e,[{key:"setUser",value:function(e){this.user=e}},{key:"loggedIn",get:function(){return null!==this.user}},{key:"loggedOut",get:function(){return null===this.user}},{key:"login",value:function(){var e=M()((function*(e){var t=(yield function(e){return Z.mutate({mutation:jt,variables:e})}(e)).data;yt()(t);var n=t.public.account.login,r=n.user,i=n.token;this.setUser(r),yield _.setItem("auth_token",i,{secure:!0})}));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=M()((function*(){yield _.deleteItem("auth_token",{secure:!0}),this.setUser(null)}));return function(){return e.apply(this,arguments)}}()},{key:"refreshAccount",value:function(){var e=M()((function*(){if(null!==(yield _.getItem("auth_token",{secure:!0}))){var e=yield function(){return Pt.apply(this,arguments)}();this.setUser(e)}}));return function(){return e.apply(this,arguments)}}()},{key:"deleteAccount",value:function(){var e=M()((function*(){yield Z.mutate({mutation:qt}),yield this.logout()}));return function(){return e.apply(this,arguments)}}()}]),e}()),Wt=function(){function e(){X()(this,e),this.onboardingCompleted=null,Object(ne.makeObservable)(this,{onboardingCompleted:ne.observable,setOnboardingCompleted:ne.action})}return te()(e,[{key:"setOnboardingCompleted",value:function(e){this.onboardingCompleted=e}},{key:"saveOnboardingCompleted",value:function(){return _.setItem(e.OnboardingStorageKey,"completed")}},{key:"refresh",value:function(){var t=M()((function*(){var t=yield _.getItem(e.OnboardingStorageKey);this.setOnboardingCompleted(null!==t||!Se)}));return function(){return t.apply(this,arguments)}}()}]),e}();Wt.OnboardingStorageKey="onboaring";var Nt=new Wt;function _t(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve()(e);if(t){var i=Ve()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return De()(this,n)}}var Yt,Jt,Zt=new(function(e){Ae()(n,e);var t=_t(n);function n(){var e;return X()(this,n),(e=t.call(this)).refresh().catch(console.warn),e}return te()(n,[{key:"refresh",value:function(){var e=M()((function*(){this.setLoading(),yield Promise.allSettled([Nt.refresh(),$t.refreshAccount(),Qe.refresh()]),this.setLoaded()}));return function(){return e.apply(this,arguments)}}()}]),n}(ze)),Gt=n(309),Kt=ce.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#2b2b2b"}}),Qt=function(){return Object(ae.jsx)(fe.default,{style:Kt.container,children:Object(ae.jsx)(Gt.default,{size:"large"})})},Xt=n(151),en=n(8),tn=n.n(en),nn=n(128),rn=n(121),an=n(188),on=n(16),sn=n.n(on),ln=n(461),cn=n(53),un=n(167),dn=Object(We.gql)(Yt||(Yt=$e()(["\nmutation($sentenceId: Int) {\n  authenticated {\n    sentence(id: $sentenceId) {\n      report\n    }\n  }\n}\n"])));function fn(e){return Z.mutate({mutation:dn,variables:e})}var bn,pn=Object(We.gql)(Jt||(Jt=$e()(["\nmutation Sentence($sentenceId: Int) {\n  authenticated {\n    sentence(id: $sentenceId) {\n      markCompleted\n    }\n  }\n}\n"])));function mn(e){return Z.mutate({mutation:pn,variables:e})}var hn=Object(We.gql)(bn||(bn=$e()(["\nmutation CreateSentence($parentSentenceId: Int!, $text: String!) {\n  authenticated {\n    sentence {\n      create(parentSentenceId: $parentSentenceId, text: $text) {\n        id\n      }\n    }\n  }\n}\n"])));function gn(e){return Z.mutate({mutation:hn,variables:e})}var yn=new(te()((function e(){X()(this,e),this.report=fn,this.markCompleted=mn,this.create=gn}))),jn=ce.default.create({text:{fontSize:16,color:"#fafafa",lineHeight:32},userTitle:{fontSize:12,fontWeight:"bold"}}),vn=function(e){var t,n,r=e.sentence,i=e.disableControls,o=e.onReport,s=e.onMarkedCompleted,l=Object(d.useTranslation)("common",{keyPrefix:"sentencesList"}).t,c=a.a.useState(!1),u=sn()(c,2),f=u[0],b=u[1];return Object(ae.jsxs)(un.default,{visible:f,onDismiss:function(){return b(!1)},anchor:Object(ae.jsx)(cn.default,{style:[jn.text,{fontWeight:$t.user&&(null==(t=r.owner)?void 0:t.id)===$t.user.id?"bold":void 0}],onPress:function(){return b(!0)},children:r.text}),anchorPosition:"bottom",children:[Object(ae.jsx)(un.default.Item,{titleStyle:jn.userTitle,title:((null==(n=r.owner)?void 0:n.username)||l("deletedUser"))+" - "+Object(ln.default)(r.createdAt,l("misc.dateFormat"))}),Object(ae.jsx)(an.default,{}),Object(ae.jsx)(un.default.Item,{title:l("report"),leadingIcon:"alert",disabled:i||null===r.parentSentenceId,onPress:function(){Le(yn.report({sentenceId:r.id}),{successMessage:l("reportSuccessfull"),onSuccess:function(){b(!1),null==o||o(r)},errorMessage:!0})}}),Object(ae.jsx)(un.default.Item,{title:l("markCompleted"),leadingIcon:"check-circle",disabled:i||null===r.parentSentenceId,onPress:function(){Le(yn.markCompleted({sentenceId:r.id}),{successMessage:l("markCompletedSuccessfull"),onSuccess:function(){b(!1),null==s||s(r)},errorMessage:!0})}})]})},On=["disableControls","onReport","onMarkedCompleted"];function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wn=function(e){var t=e.disableControls,n=e.onReport,r=e.onMarkedCompleted,i=tn()(e,On);return Object(ae.jsx)(nn.default,Sn(Sn({},i),{},{renderItem:function(e){var i=e.item;return Object(ae.jsx)(vn,{sentence:i,disableControls:t,onReport:n,onMarkedCompleted:r})},keyExtractor:function(e){return e.id.toString()},ListEmptyComponent:rn.default,ItemSeparatorComponent:function(){return Object(ae.jsx)(an.default,{bold:!0,style:{width:"8%",backgroundColor:"burlywood"}})}}))},Pn=n(51),kn=n(189),Cn=n(263),In=n(122),Ln=["codeLength","onCodeChange","onCodeCompleted","onResendCode"];function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=ce.default.create({container:{margin:20,backgroundColor:"#404040",padding:20,borderRadius:20,borderWidth:4,borderColor:"#333333"},title:{fontWeight:"bold",marginVertical:10},subtitle:{marginBottom:20},codeInput:{fontSize:32,height:64,textAlign:"center"},resendCodeBtn:{marginTop:25}}),Dn=function(e){var t=e.codeLength,n=e.onCodeChange,r=e.onCodeCompleted,i=e.onResendCode,o=tn()(e,Ln),s=Object(d.useTranslation)("common",{keyPrefix:"codeValidationModal"}).t,l=a.a.useState(!1),c=sn()(l,2),u=c[0],f=c[1],b=a.a.useMemo((function(){return"".padStart(t,"-")}),[t]);return Object(ae.jsxs)(kn.default,An(An({},o),{},{dismissable:!1,contentContainerStyle:Rn.container,children:[Object(ae.jsx)(pe.default,{variant:"titleLarge",style:Rn.title,children:s("title")}),Object(ae.jsx)(pe.default,{variant:"titleSmall",style:Rn.subtitle,children:s("subTitle")}),Object(ae.jsx)(Cn.default,{mode:"outlined",textAlign:"center",placeholder:b,style:Rn.codeInput,textContentType:"oneTimeCode",keyboardType:"number-pad",maxLength:t,onChangeText:function(e){null==n||n(e),e.length>=t&&(Pn.default.dismiss(),r(e))}}),Object(ae.jsx)(In.default,{icon:"reload",style:Rn.resendCodeBtn,onPress:function(){f(!0),setTimeout((function(){f(!1)}),3e4),i()},disabled:u,children:s("resendCode")})]}))},Mn=n(265),Vn=n(69),En=ce.default.create({fab:{position:"absolute",right:40,bottom:50}}),qn=function(){var e=Object(Vn.useNavigation)(),t=Object(d.useTranslation)("common",{keyPrefix:"participationFab"}).t;return Object(ae.jsx)(Mn.default,{icon:"pencil-plus",label:t("participate"),style:En.fab,onPress:function(){null!==$t.user?e.navigate("PartialStory"):e.navigate("Login")}})},Bn=n(319),Fn=Object(he.observer)((function(){var e,t,n=Object(d.useTranslation)("screens",{keyPrefix:"home.hero"}).t;return Object(ae.jsx)(Bn.default,{source:H.home.treeBackground,resizeMode:"cover",style:Hn.container,children:Object(ae.jsxs)(fe.default,{style:Hn.textOverlay,children:[Object(ae.jsx)(pe.default,{variant:"titleLarge",children:n("hello")}),Object(ae.jsx)(pe.default,{variant:"headlineLarge",style:{fontWeight:"bold"},children:(null!=(e=null==(t=$t.user)?void 0:t.username)?e:n("guest"))+"."}),Object(ae.jsx)(me.default,{icon:"cog",size:30,style:Hn.settingsIcon,onPress:Qe.settingsOpenState.toggle})]})})})),Hn=ce.default.create({container:{width:"100%",minHeight:250,borderBottomLeftRadius:24,borderBottomRightRadius:24,overflow:"hidden"},textOverlay:{flex:1,paddingTop:60,paddingLeft:30,backgroundColor:"rgba(40,40,40, 0.5)"},settingsIcon:{position:"absolute",top:40,right:5}}),zn=Fn,Un=n(190),$n=n(27);function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _n=Object(he.observer)((function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"home.statistics"}).t,t=function(t){return void 0!==t?t.toString():e("nullValue")},n=Qe.statistics.lastResult;return Object(ae.jsxs)(Un.default,{style:Yn.container,children:[Object(ae.jsx)(Un.default.Title,{title:e("title"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(ae.jsx)($n.Avatar.Icon,Nn(Nn({},e),{},{icon:"chart-donut",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}}))}}),Object(ae.jsxs)(Un.default.Content,{children:[Object(ae.jsx)($n.List.Item,{title:t(null==n?void 0:n.users),description:e("stats.users"),left:function(e){return Object(ae.jsx)($n.List.Icon,Nn(Nn({},e),{},{icon:"account-group"}))},style:Yn.itemStyle}),Object(ae.jsx)($n.List.Item,{title:t(null==n?void 0:n.openTrees),description:e("stats.trees"),left:function(e){return Object(ae.jsx)($n.List.Icon,Nn(Nn({},e),{},{icon:"pine-tree"}))},style:Yn.itemStyle}),Object(ae.jsx)($n.List.Item,{title:t(null==n?void 0:n.stories),description:e("stats.stories"),left:function(e){return Object(ae.jsx)($n.List.Icon,Nn(Nn({},e),{},{icon:"book-open-variant"}))},style:Yn.itemStyle}),Object(ae.jsx)($n.List.Item,{title:t(null==n?void 0:n.sentences),description:e("stats.sentences"),left:function(e){return Object(ae.jsx)($n.List.Icon,Nn(Nn({},e),{},{icon:"send"}))},style:Yn.itemStyle})]})]})})),Yn=ce.default.create({container:{marginTop:20,backgroundColor:"#323232"},itemStyle:{paddingVertical:0}}),Jn=_n;function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kn=Object(he.observer)((function(){var e=Object(Vn.useNavigation)(),t=Object(d.useTranslation)("screens",{keyPrefix:"home.dailyStory"}).t;return Object(ae.jsx)(Un.default,{style:Qn.container,onPress:function(){var t,n=null==(t=Qe.dailyStory.lastResult)?void 0:t.id;yt()(void 0!==n),e.navigate("StoryViewer",{storyId:n})},children:Object(ae.jsx)(Un.default.Title,{title:t("title"),subtitle:t("subtitle"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(ae.jsx)($n.Avatar.Icon,Gn(Gn({},e),{},{icon:"calendar-today",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}}))}})})})),Qn=ce.default.create({container:{marginTop:20,backgroundColor:"#323232"}}),Xn=Kn,er=ce.default.create({container:{marginTop:20,backgroundColor:"#323232"}}),tr=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"home.myLibrary"}).t,t=Object(Vn.useNavigation)();return Object(ae.jsx)(Un.default,{style:er.container,onPress:function(){null!==$t.user?t.navigate("Library"):t.navigate("Login")},children:Object(ae.jsx)(Un.default.Title,{title:e("title"),subtitle:e("subtitle"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(ae.jsx)($n.Avatar.Icon,{icon:"bookshelf",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}})}})})},nr=n(320),rr=n(242);function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var or=Object(he.observer)((function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"home.settingsSheet"}).t,t=Object(Vn.useNavigation)();return Object(ae.jsxs)(Oe,{title:e("title"),onClose:Qe.settingsOpenState.close,open:Qe.settingsOpenState.isOpen,animationDuration:250,scrollViewProps:{style:{padding:10}},children:[$t.user&&Object(ae.jsx)($n.List.Item,{title:$t.user.username,description:$t.user.email,left:function(e){return Object(ae.jsx)($n.List.Icon,ar(ar({},e),{},{icon:"account"}))},style:{marginBottom:10}}),Object(ae.jsxs)($n.List.Section,{children:[Object(ae.jsx)($n.List.Subheader,{children:e("actions")}),Object(ae.jsx)($n.List.Item,{title:e("about"),left:function(e){return Object(ae.jsx)($n.List.Icon,ar(ar({},e),{},{icon:"information"}))},onPress:function(){Qe.settingsOpenState.close(),t.navigate("Onboarding")}}),Object(ae.jsx)($n.List.Item,{title:e("support"),left:function(e){return Object(ae.jsx)($n.List.Icon,ar(ar({},e),{},{icon:"face-agent"}))},onPress:function(){rr.default.canOpenURL("https://www.baptech.fr/").then((function(e){e&&rr.default.openURL("https://www.baptech.fr/").catch(console.error)})).catch(console.error)}}),$t.loggedIn&&Object(ae.jsx)($n.List.Item,{title:e("logout"),left:function(e){return Object(ae.jsx)($n.List.Icon,ar(ar({},e),{},{icon:"logout"}))},onPress:function(){Le($t.logout(),{successMessage:e("logoutSuccess"),onSuccess:Qe.settingsOpenState.close,errorMessage:!0})}})]}),$t.loggedIn&&Object(ae.jsxs)($n.List.Section,{style:{borderWidth:1,borderColor:"rgba(255, 77, 77, .5)",marginTop:20},children:[Object(ae.jsx)($n.List.Subheader,{children:e("dangerZone")}),Object(ae.jsx)($n.List.Item,{title:e("deleteAccount"),left:function(e){return Object(ae.jsx)($n.List.Icon,ar(ar({},e),{},{icon:"delete"}))},onPress:function(){nr.default.alert(e("accountDeletionAlert.title"),e("accountDeletionAlert.description"),[{text:e("accountDeletionAlert.cancel"),style:"cancel"},{text:e("accountDeletionAlert.submit"),style:"destructive",onPress:function(){Le($t.deleteAccount(),{successMessage:e("accountDeletionSuccess"),errorMessage:!0})}}])}})]})]})})),sr=Object(he.observer)((function(e){return Object(ae.jsxs)(fe.default,{style:lr.container,children:[Object(ae.jsxs)(be.default,{refreshControl:Object(ae.jsx)(Xt.default,{refreshing:Qe.dailyStory.loading||Qe.statistics.loading,onRefresh:function(){Le(Qe.pullRefresh(),{successMessage:null,errorMessage:!0})}}),children:[Object(ae.jsx)(zn,{}),Object(ae.jsxs)(fe.default,{style:lr.cardsContainer,children:[Qe.dailyStory.lastResult&&Object(ae.jsx)(Xn,{}),Object(ae.jsx)(tr,{}),Object(ae.jsx)(Jn,{})]})]}),Object(ae.jsx)(qn,{}),Object(ae.jsx)(or,{})]})})),lr=ce.default.create({container:{flex:1},cardsContainer:{paddingHorizontal:10},fab:{position:"absolute",right:40,bottom:50}}),cr=sr,ur=n(84),dr=n(127),fr=n(452),br=n(99),pr=n(68),mr=pr.object().shape({email:pr.string().email().required(),password:pr.string().required()}),hr=ce.default.create({container:{flex:1},formContainer:{marginHorizontal:20},headline:{marginBottom:20},textField:{marginVertical:5},button:{marginTop:20}}),gr=function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"login"}).t,r=Object(fr.default)();return Object(ae.jsx)(ur.default,{style:hr.container,children:Object(ae.jsx)(dr.default,{behavior:"ios"===xe.default.OS?"padding":"height",keyboardVerticalOffset:r,style:{flex:1,justifyContent:"center"},children:Object(ae.jsx)(br.Formik,{initialValues:{email:"",password:""},validationSchema:mr,onSubmit:function(e){return Pn.default.dismiss(),Le($t.login(e),{successMessage:null,errorMessage:!0,onSuccess:function(){t.reset({index:0,routes:[{name:"Home"}]})}})},children:function(e){var r=e.handleChange,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ae.jsxs)(fe.default,{style:hr.formContainer,children:[Object(ae.jsxs)(fe.default,{style:hr.headline,children:[Object(ae.jsx)(pe.default,{variant:"headlineLarge",children:n("form.headlineTitle")}),Object(ae.jsx)(pe.default,{variant:"titleSmall",children:n("form.headlineDescription")})]}),Object(ae.jsx)(Cn.default,{label:n("form.email"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(ae.jsx)(Cn.default.Icon,{icon:"email"}),style:hr.textField,value:a.email,onChangeText:r("email"),error:Boolean(o.email)&&s.email}),Object(ae.jsx)(Cn.default,{label:n("form.password"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(ae.jsx)(Cn.default.Icon,{icon:"lock"}),style:hr.textField,value:a.password,onChangeText:r("password"),error:Boolean(o.password)&&s.password}),Object(ae.jsx)(In.default,{mode:"contained",style:hr.button,disabled:l,loading:l,onPress:function(){i()},children:n("form.submit")}),Object(ae.jsx)(In.default,{mode:"outlined",style:hr.button,onPress:function(){t.navigate("Register")},children:n("form.register")}),Object(ae.jsx)(In.default,{mode:"text",style:hr.button,onPress:function(){return t.navigate("ForgotPassword")},children:n("form.forgotPassword")})]})}})})})},yr=n(260);function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vr=pr.object().shape({username:pr.string().min(2).max(24).matches(F).required(),email:pr.string().email().required(),password:pr.string().min(4).required()}),Or=ce.default.create({container:{flex:1},formContainer:{marginHorizontal:20},headline:{marginBottom:20},textField:{marginVertical:5},button:{marginTop:20}}),xr=function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"register"}).t,r=Object(fr.default)(),i=a.a.useState(!1),o=sn()(i,2),s=o[0],l=o[1],c=a.a.useRef(null);return Object(ae.jsxs)(ur.default,{style:Or.container,children:[Object(ae.jsx)(dr.default,{behavior:"ios"===xe.default.OS?"padding":"height",keyboardVerticalOffset:r,style:{flex:1,justifyContent:"center"},children:Object(ae.jsx)(br.Formik,{initialValues:{username:"",email:"",password:""},validationSchema:vr,onSubmit:function(e){var t=e.email;return Pn.default.dismiss(),c.current=e,Le($t.verifyEmail({email:t}),{successMessage:null,onSuccess:function(){return l(!0)},errorMessage:!0})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ae.jsxs)(fe.default,{style:Or.formContainer,children:[Object(ae.jsxs)(fe.default,{style:Or.headline,children:[Object(ae.jsx)(pe.default,{variant:"headlineLarge",children:n("form.headlineTitle")}),Object(ae.jsx)(pe.default,{variant:"titleSmall",children:n("form.headlineDescription")})]}),Object(ae.jsx)(Cn.default,{label:n("form.username"),mode:"outlined",textContentType:"username",right:Object(ae.jsx)(Cn.default.Icon,{icon:"account-circle"}),value:a.username,onChangeText:t("username"),onBlur:r("username"),error:Boolean(o.username)&&s.username}),Object(ae.jsx)(yr.default,{type:"info",children:n("form.usernameHelper")}),Object(ae.jsx)(Cn.default,{label:n("form.email"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(ae.jsx)(Cn.default.Icon,{icon:"email"}),style:Or.textField,value:a.email,onChangeText:t("email"),onBlur:r("email"),error:Boolean(o.email)&&s.email}),Object(ae.jsx)(Cn.default,{label:n("form.password"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(ae.jsx)(Cn.default.Icon,{icon:"lock"}),style:Or.textField,value:a.password,onChangeText:t("password"),onBlur:r("password"),error:Boolean(o.password)&&s.password}),Object(ae.jsx)(In.default,{mode:"contained",style:Or.button,disabled:l,loading:l,onPress:function(){i()},children:n("form.submit")})]})}})}),Object(ae.jsx)(Dn,{visible:s,codeLength:6,onResendCode:function(){var e,t=null==(e=c.current)?void 0:e.email;yt()(void 0!==t),Le($t.resendEmailVerificationCode({email:t}),{successMessage:null,errorMessage:!0})},onCodeCompleted:function(e){yt()(null!==c.current),Le($t.register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({emailValidationCode:e},c.current)),{successMessage:n("form.registerSuccess"),onSuccess:function(){l(!1),t.navigate("Login")},errorMessage:!0})}})]})},Sr=pr.object().shape({email:pr.string().email().required()}),wr=function(e){var t=e.onEmailSubmited,n=Object(d.useTranslation)("screens",{keyPrefix:"forgotPassword.forgotPasswordForm"}).t;return Object(ae.jsx)(br.Formik,{initialValues:{email:""},validationSchema:Sr,onSubmit:function(e){var n=e.email;return Le($t.forgotPassword({email:n}),{successMessage:null,onSuccess:function(){return t(n)},errorMessage:!0,onError:function(){return Pn.default.dismiss()}})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ae.jsxs)(fe.default,{children:[Object(ae.jsxs)(fe.default,{style:{marginBottom:32},children:[Object(ae.jsx)(pe.default,{variant:"headlineLarge",children:n("title")}),Object(ae.jsx)(pe.default,{variant:"titleSmall",children:n("subtitle")})]}),Object(ae.jsx)(Cn.default,{label:n("emailLabel"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(ae.jsx)(Cn.default.Icon,{icon:"email"}),value:a.email,onChangeText:t("email"),onBlur:r("email"),error:Boolean(o.email)&&s.email}),Object(ae.jsx)(In.default,{mode:"contained",disabled:l,loading:l,onPress:function(){return i()},style:{marginTop:32},children:n("submit")})]})}})};function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cr=pr.object().shape({newPassword:pr.string().min(4).required(),validationCode:pr.string().min(8).required()}),Ir=function(e){var t=e.email,n=Object(d.useTranslation)("screens",{keyPrefix:"forgotPassword.resetPasswordForm"}).t,r=Object(Vn.useNavigation)();return Object(ae.jsx)(br.Formik,{initialValues:{newPassword:"",validationCode:""},validationSchema:Cr,onSubmit:function(e){return Le($t.resetPassword(kr(kr({},e),{},{email:t})),{successMessage:null,onSuccess:function(){return r.navigate("Login")},errorMessage:!0,onError:function(){return Pn.default.dismiss()}})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ae.jsxs)(fe.default,{children:[Object(ae.jsxs)(fe.default,{style:{marginBottom:32},children:[Object(ae.jsx)(pe.default,{variant:"headlineLarge",children:n("title")}),Object(ae.jsx)(pe.default,{variant:"titleSmall",children:n("subtitle")})]}),Object(ae.jsx)(Cn.default,{label:n("newPasswordLabel"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(ae.jsx)(Cn.default.Icon,{icon:"lock"}),value:a.newPassword,onChangeText:t("newPassword"),onBlur:r("newPassword"),error:Boolean(o.newPassword)&&s.newPassword}),Object(ae.jsx)(Cn.default,{label:n("validationCodeLabel"),mode:"outlined",autoCapitalize:"characters",right:Object(ae.jsx)(Cn.default.Icon,{icon:"numeric"}),maxLength:8,value:a.validationCode,onChangeText:t("validationCode"),onBlur:r("validationCode"),error:Boolean(o.validationCode)&&s.validationCode,style:{marginTop:10}}),Object(ae.jsx)(In.default,{mode:"contained",disabled:l,loading:l,onPress:function(){return i()},style:{marginTop:32},children:n("submit")})]})}})},Lr=ce.default.create({container:{flex:1,justifyContent:"center",paddingHorizontal:20}}),Tr=function(e){var t=Object(fr.default)(),n=a.a.useState(null),r=sn()(n,2),i=r[0],o=r[1];return Object(ae.jsx)(ur.default,{style:{flex:1},children:Object(ae.jsx)(dr.default,{behavior:"ios"===xe.default.OS?"padding":"height",keyboardVerticalOffset:t,style:{flex:1},children:Object(ae.jsx)(fe.default,{style:Lr.container,children:null===i?Object(ae.jsx)(wr,{onEmailSubmited:function(e){o(e)}}):Object(ae.jsx)(Ir,{email:i})})})})},Ar=n(55),Rr=ce.default.create({container:{flex:1},image:{flex:.7,width:"100%",resizeMode:"contain"},texts:{flex:.3,alignItems:"center"},title:{marginBottom:20,fontSize:32,fontWeight:"bold",color:"whitesmoke",textAlign:"center"},description:{paddingHorizontal:40,fontSize:16,fontWeight:"500",color:"whitesmoke",textAlign:"justify"}}),Dr=function(e){var t=e.image,n=e.title,r=e.description,i=Object(de.default)().width,a=Object(Vn.useNavigation)();return Object(ae.jsxs)(fe.default,{style:[Rr.container,{width:i}],children:[Object(ae.jsx)(Ar.default,{source:t,style:Rr.image}),Object(ae.jsxs)(fe.default,{style:Rr.texts,children:[Object(ae.jsx)(cn.default,{style:Rr.title,children:n}),void 0!==r?Object(ae.jsx)(cn.default,{style:Rr.description,children:r}):Object(ae.jsx)(me.default,{icon:"arrow-right-circle",iconColor:"whitesmoke",size:96,onPress:function(){Nt.saveOnboardingCompleted().catch(console.error),a.replace("Home")}})]})]})},Mr=ce.default.create({container:{flexDirection:"row",height:64},dot:{width:10,height:10,borderRadius:5,backgroundColor:"whitesmoke",marginHorizontal:5}}),Vr=function(e){var t=e.itemsCount,n=e.currentItemIdx;return Object(ae.jsx)(fe.default,{style:Mr.container,children:Array.from({length:t},(function(e,t){return Object(ae.jsx)(fe.default,{style:[Mr.dot,{opacity:t===n?1:.5}]},t)}))})};function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var qr=ce.default.create({container:{flex:1,alignItems:"center"}}),Br=function(){var e=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"onboarding"}).t;return[{image:H.onboarding.slide1,title:e("slide1.title"),description:e("slide1.description")},{image:H.onboarding.slide2,title:e("slide2.title"),description:e("slide2.description")},{image:H.onboarding.slide3,title:e("slide3.title"),description:e("slide3.description")},{image:H.onboarding.slide4,title:e("slide4.title"),description:e("slide4.description")},{image:H.onboarding.slide5,title:e("slide5.title"),description:e("slide5.description")},{image:H.onboarding.slide6,title:e("slide6.title")}]}(),t=a.a.useState(0),n=sn()(t,2),r=n[0],i=n[1],o=a.a.useCallback((function(e){var t,n;return i(null!=(t=null==(n=e.viewableItems.at(0))?void 0:n.index)?t:null)}),[]);return Object(ae.jsxs)(fe.default,{style:qr.container,children:[Object(ae.jsx)(nn.default,{data:e,renderItem:function(e){var t=e.item;return Object(ae.jsx)(Dr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){le()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))},horizontal:!0,pagingEnabled:!0,bounces:!1,showsHorizontalScrollIndicator:!1,onViewableItemsChanged:o,viewabilityConfig:{viewAreaCoveragePercentThreshold:50}}),Object(ae.jsx)(Vr,{itemsCount:e.length,currentItemIdx:r})]})},Fr=function(e){return Object(ae.jsx)(Br,{})};var Hr,zr=n(261),Ur=ce.default.create({container:{flexDirection:"row",alignItems:"center"},progressBar:{width:64,marginHorizontal:8},label:{color:"rgba(245,245,245, .75)"}}),$r=function(e){var t=e.maxCharsCount,n=e.currentCharsCount,r=n/t;return Object(ae.jsxs)(fe.default,{style:Ur.container,children:[Object(ae.jsx)(zr.default,{progress:r,style:Ur.progressBar}),Object(ae.jsx)(pe.default,{variant:"labelLarge",style:Ur.label,children:t-n})]})},Wr=pr.object().shape({text:pr.string().min(3).max(180).required("Required")}),Nr=ce.default.create({container:{position:"absolute",bottom:0,left:0,width:"100%",paddingHorizontal:4},textInput:{width:"100%",maxHeight:200},controlsContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:5}}),_r=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"partialStory"}).t,t=Object(Vn.useNavigation)(),n=function(){var e=a.a.useState(!1),t=sn()(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=Pn.default.addListener("keyboardWillShow",(function(){return r(!0)})),t=Pn.default.addListener("keyboardWillHide",(function(){return r(!1)}));return function(){e.remove(),t.remove()}}),[]),n}();return Object(ae.jsx)(br.Formik,{initialValues:{text:""},validationSchema:Wr,onSubmit:function(e,n){var r=e.text,i=it.lastSentence;return yt()(i),Pn.default.dismiss(),Le(yn.create({text:r,parentSentenceId:i.id}),{successMessage:null,onSuccess:function(){n.resetForm(),t.navigate("ParticipationSuccess")},errorMessage:!0})},children:function(t){var r=t.handleSubmit,i=t.handleChange,a=t.handleBlur,o=t.isSubmitting,s=t.values,l=t.errors,c=t.touched;return Object(ae.jsxs)(fe.default,{style:Nr.container,children:[Object(ae.jsx)(Cn.default,{style:Nr.textInput,mode:"outlined",placeholder:e("write"),multiline:!0,maxLength:180,value:s.text,onChangeText:i("text"),onBlur:a("text"),error:Boolean(l.text)&&c.text}),(n||!Se)&&Object(ae.jsxs)(fe.default,{style:Nr.controlsContainer,children:[Object(ae.jsx)($r,{maxCharsCount:180,currentCharsCount:s.text.length}),Object(ae.jsx)(me.default,{icon:"send",disabled:o,onPress:function(){return r()}})]})]})}})},Yr=Object(he.observer)((function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"partialStory"}).t,r=Object(fr.default)();return Object(ae.jsx)(ur.default,{style:Jr.safeAreaView,children:Object(ae.jsx)(dr.default,{style:Jr.keyboardAvoidingView,behavior:"ios"===xe.default.OS?"padding":"height",keyboardVerticalOffset:r,children:Object(ae.jsxs)(fe.default,{style:Jr.container,children:[Object(ae.jsx)(wn,{style:Jr.sentenceList,data:it.partialStory.result,onReport:function(){return t.navigate("ParticipationSuccess")},onMarkedCompleted:function(){return t.navigate("ParticipationSuccess")},ListHeaderComponent:Object(ae.jsx)(pe.default,{variant:"labelMedium",style:Jr.listInfoHeader,children:n("listInfoHeader")})}),Object(ae.jsx)(_r,{})]})})})})),Jr=ce.default.create({safeAreaView:{flex:1},keyboardAvoidingView:{flex:1},container:{flex:1},sentenceList:{paddingHorizontal:20},listInfoHeader:{textAlign:"center",marginVertical:20}}),Zr=Yr,Gr=ce.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"mediumseagreen"},title:{fontWeight:"bold",marginVertical:4,color:"whitesmoke"},buttonsContainer:{marginTop:64},button:{marginVertical:16,backgroundColor:"whitesmoke"},buttonText:{color:"mediumseagreen"}}),Kr=function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"participationSuccess"}).t;return Object(ae.jsxs)(ur.default,{style:Gr.container,children:[Object(ae.jsx)(me.default,{icon:"check-circle-outline",iconColor:"whitesmoke",size:100}),Object(ae.jsx)(pe.default,{variant:"headlineLarge",style:Gr.title,children:n("title")}),Object(ae.jsxs)(fe.default,{style:Gr.buttonsContainer,children:[Object(ae.jsx)(In.default,{style:Gr.button,mode:"contained",onPress:function(){return t.navigate("PartialStory")},children:Object(ae.jsx)(pe.default,{variant:"titleLarge",style:[Gr.buttonText,{fontWeight:"bold"}],children:n("partialStoryLink")})}),Object(ae.jsx)(In.default,{style:Gr.button,mode:"contained",onPress:function(){return t.navigate("Home")},children:Object(ae.jsx)(pe.default,{variant:"titleMedium",style:Gr.buttonText,children:n("homeLink")})})]})]})},Qr=Object(We.gql)(Hr||(Hr=$e()(["\nquery GetStory ($storyId: Int!) {\n  public {\n    story(storyId: $storyId) {\n      id\n      sentences {\n        id\n        text\n        parentSentenceId\n        owner {\n          id\n          username\n        }\n        createdAt\n      }\n      createdAt\n    }\n  }\n}\n"])));function Xr(e){return ei.apply(this,arguments)}function ei(){return(ei=M()((function*(e){return(yield Z.query({query:Qr,variables:e})).data.public.story}))).apply(this,arguments)}var ti=new(function(){function e(){X()(this,e),this.story=new Fe(Xr,{catchUnhandled:console.error})}return te()(e,[{key:"refresh",value:function(){var e=M()((function*(e){yield this.story.ensureSuccessReload({storyId:e})}));return function(t){return e.apply(this,arguments)}}()}]),e}()),ni=Object(he.observer)((function(e){var t=e.route.params.storyId;Object(Vn.useFocusEffect)(a.a.useCallback((function(){Le(ti.refresh(t),{successMessage:null,errorMessage:!0})}),[t]));var n=Object(d.useTranslation)("screens",{keyPrefix:"storyViewer"}).t,r=ti.story.result;return Object(ae.jsx)(ur.default,{style:ri.container,children:Object(ae.jsx)(wn,{data:null==r?void 0:r.sentences,disableControls:!0,style:ri.sentencesList,ListHeaderComponent:void 0!==(null==r?void 0:r.createdAt)?Object(ae.jsx)(pe.default,{variant:"labelMedium",style:ri.dateHeader,children:n("completedTitle")+" "+Object(ln.default)(r.createdAt,n("dateFormat"))}):null})})})),ri=ce.default.create({container:{flex:1},sentencesList:{paddingHorizontal:20},dateHeader:{textAlign:"center",marginVertical:20}}),ii=ni,ai=ce.default.create({card:{marginBottom:20}}),oi=function(e){var t=e.story,n=t.id,r=t.title,i=t.createdAt,a=Object(d.useTranslation)("screens",{keyPrefix:"library"}).t,o=Object(Vn.useNavigation)();return Object(ae.jsx)(Un.default,{style:ai.card,onPress:function(){return o.navigate("StoryViewer",{storyId:n})},children:Object(ae.jsx)(Un.default.Title,{title:r,titleVariant:"bodyLarge",subtitle:Object(ln.default)(i,a("misc.dateFormat")),subtitleVariant:"labelSmall"})})},si=ce.default.create({container:{flex:1,alignItems:"center",paddingTop:50},image:{width:200,height:200,resizeMode:"contain"}}),li=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"library"}).t;return Object(ae.jsxs)(fe.default,{style:si.container,children:[Object(ae.jsx)(Ar.default,{source:H.misc.empty,style:si.image}),Object(ae.jsx)(pe.default,{variant:"titleLarge",children:e("emptyLibrary")})]})},ci=Object(he.observer)((function(e){var t=Object(d.useTranslation)("screens",{keyPrefix:"library"}).t;return Object(ae.jsxs)(fe.default,{style:ui.container,children:[Object(ae.jsx)(nn.default,{data:dt.stories.result,renderItem:function(e){var t=e.item;return Object(ae.jsx)(oi,{story:t})},keyExtractor:function(e){return e.id.toString()},refreshControl:Object(ae.jsx)(Xt.default,{refreshing:dt.stories.loading,onRefresh:function(){Le(dt.refresh(),{successMessage:null,errorMessage:!0})}}),ListHeaderComponent:Object(ae.jsx)(pe.default,{variant:"labelLarge",style:ui.infoText,children:t("pageInfo",{sentencesCount:dt.mySentencesCount.lastResult})}),ListEmptyComponent:Object(ae.jsx)(li,{})}),Object(ae.jsx)(qn,{})]})})),ui=ce.default.create({container:{flex:1,paddingHorizontal:10},infoText:{marginVertical:24}}),di=ci,fi=Object(Ce.default)(),bi=Object(he.observer)((function(){var e=Object(d.useTranslation)("common",{keyPrefix:"app"}).t;return Zt.loading?Object(ae.jsx)(Qt,{}):Object(ae.jsx)(ke.default,{children:Object(ae.jsxs)(fi.Navigator,{initialRouteName:Nt.onboardingCompleted?"Home":"Onboarding",screenOptions:{headerStyle:{backgroundColor:"#2b2b2b"},headerBackTitle:e("backTitle"),headerTitleStyle:{fontWeight:"bold",fontSize:20,color:"#fafafa"},contentStyle:{backgroundColor:"#2b2b2b"}},children:[Object(ae.jsx)(fi.Screen,{name:"Home",component:cr,options:{headerShown:!1},listeners:{focus:ft}}),Object(ae.jsx)(fi.Screen,{name:"Login",component:gr,options:{title:e("screens.login")}}),Object(ae.jsx)(fi.Screen,{name:"Register",component:xr,options:{title:e("screens.register")}}),Object(ae.jsx)(fi.Screen,{name:"ForgotPassword",component:Tr,options:{title:e("screens.forgotPassword")}}),Object(ae.jsx)(fi.Screen,{name:"Onboarding",component:Fr,options:{headerShown:!1}}),Object(ae.jsx)(fi.Screen,{name:"PartialStory",component:Zr,options:{title:e("screens.partialStory")},listeners:{focus:bt}}),Object(ae.jsx)(fi.Screen,{name:"ParticipationSuccess",component:Kr,options:{headerShown:!1}}),Object(ae.jsx)(fi.Screen,{name:"StoryViewer",component:ii,options:{title:e("screens.storyViewer")}}),Object(ae.jsx)(fi.Screen,{name:"Library",component:di,options:{title:e("screens.library")},listeners:{focus:pt}})]})})}));Object(o.default)((function(){return Object(ae.jsx)(l.ApolloProvider,{client:Z,children:Object(ae.jsx)(c.default,{children:Object(ae.jsxs)(Pe,{children:[Object(ae.jsx)(bi,{}),Object(ae.jsx)(oe,{}),Object(ae.jsx)(s.StatusBar,{style:"auto"})]})})})}))}},[[352,1,2]]]);
//# sourceMappingURL=app.da41de3b.chunk.js.map