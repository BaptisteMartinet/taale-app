(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{352:function(e,t,n){e.exports=n(419)},371:function(e,t,n){e.exports=n.p+"static/media/slide1.363002c1.png"},372:function(e,t,n){e.exports=n.p+"static/media/slide2.a9c23c2f.png"},373:function(e,t,n){e.exports=n.p+"static/media/slide3.f00edb54.png"},374:function(e,t,n){e.exports=n.p+"static/media/slide4.3ba82faf.png"},375:function(e,t,n){e.exports=n.p+"static/media/slide5.56af1504.png"},376:function(e,t,n){e.exports=n.p+"static/media/slide6.de1ae450.png"},377:function(e,t,n){e.exports=n.p+"static/media/treeBackground.3131d4f0.jpg"},378:function(e,t,n){e.exports=n.p+"static/media/void.3f06e14f.png"},419:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),o=n(456),s=n(338),l=n(455),c=n(264),u=n(201),d=n(243),f=n(31),b=n(217),p={fr:{form:{headlineTitle:"Rebonjour!",headlineDescription:"Connectez-vous \xe0 votre compte",email:"Email",password:"Mot de passe",submit:"Se connecter",forgotPassword:"Mot de passe oubli\xe9",register:"Je n'ai pas de compte"}},en:{form:{headlineTitle:"Welcome back!",headlineDescription:"Sign in to your account",email:"Email",password:"Password",submit:"Sign in",forgotPassword:"Forgot password",register:"I don't have an account"}}},m={fr:{form:{headlineTitle:"Bienvenue sur Taale",headlineDescription:"Cr\xe9er votre compte",username:"Nom d'utilisateur",usernameHelper:"[a-z], [0-9], '_' (ex: John_Doe07)",email:"Email",password:"Mot de passe",submit:"Cr\xe9er mon compte",registerSuccess:"Compte cr\xe9\xe9 avec succ\xe8s"}},en:{form:{headlineTitle:"Welcome to Taale!",headlineDescription:"Create an account",username:"Username",usernameHelper:"[a-z], [0-9], '_' (ex: John_Doe07)",email:"Email",password:"Password",submit:"Sign Up",registerSuccess:"Account successfully created"}}},h={fr:{forgotPasswordForm:{title:"R\xe9initialisez votre mot de passe",subtitle:"Vous allez recevoir un code de validation par email.",emailLabel:"Email",submit:"Envoyer le code"},resetPasswordForm:{title:"R\xe9initialisez votre mot de passe",subtitle:"Veuillez renseigner un nouveau mot de passe.",newPasswordLabel:"Nouveau mot de passe",validationCodeLabel:"Code",submit:"Sauvegarder"}},en:{forgotPasswordForm:{title:"Reset your password",subtitle:"You'll receive a validation code by email.",emailLabel:"Email",submit:"Send verification code"},resetPasswordForm:{title:"Reset your password",subtitle:"Set your new password.",newPasswordLabel:"New password",validationCodeLabel:"Code",submit:"Save"}}},g={fr:{slide1:{title:"Bienvenue sur Taale",description:"Taale est une application d'\xe9criture collaborative ou les utilisateurs participent \xe0 l'\xe9laboration d'une immense fable comportant une infinit\xe9 d'univers paral\xe8lles."},slide2:{title:"L'arbre",description:'On peux representer la Fable comme un gigantesque arbre invers\xe9. La base sera toujours la phrase "Il \xe9tait une fois, " puis les utilisateurs construisent les branches au fil des paragraphes qu\'ils \xe9crivent.'},slide3:{title:"Un cadre limit\xe9",description:"Pour pimenter la chose, les utilisateurs sont plac\xe9s al\xe9atoirement sur une branche et ne peuvent voir que quelques paragraphes au dessus d'eux. Le but \xe9tant de continuer l'histoire tout en gardant son sens."},slide4:{title:"Deviens Taaler",description:"\xc0 chaque fois tu \xe9crit un nouveau paragraphe, tu d\xe9bloque un univers des possibles. Tu te retrouvera certainement dans une des histoires publi\xe9es quotidiennement sur la page d'accueil."},slide5:{title:"Vote !",description:"Si tu pense qu'une certaine phrase termine l'histoire, clique dessus pour voter la fin de la branche. Au contraire, si une phrase ne fait aucun sens ou comporte du contenu injurieux, tu peux la signaler."},slide6:{title:"\xc0 toi de jouer"}},en:{slide1:{title:"Welcome to Taale",description:"Taale is a collaborative writing application where users participate in the development of a massive fable containing an infinite number of parallel universes."},slide2:{title:"The tree",description:"We can represent the Fable as a gigantic inverted tree. The base will always be the sentence 'Once upon a time, ' and then the users will build the branches as they write paragraphs."},slide3:{title:"Limited scope",description:"To add some spice, users are randomly placed on a branch and can only see a few paragraphs above them. The goal is to continue the story while keeping its meaning intact."},slide4:{title:"Become a Taaler",description:"Every time you write a new paragraph, you unlock a universe of possibilities. You may find yourself in one of the stories featured daily on the homepage."},slide5:{title:"Vote!",description:"If you think that a certain sentence ends the story, click on it to vote for the end of the branch. On the contrary, if a phrase doesn't make any sense or contains offensive content, you can report it."},slide6:{title:"Your turn to play"}}},y={fr:{hero:{hello:"Bonjour,",guest:"Invit\xe9"},statistics:{title:"Taale en chiffres",stats:{users:"Utilisateurs",trees:"Arbres (Langues support\xe9es)",stories:"Branches (Histoires cr\xe9es)",sentences:"Feuilles (Paragraphes \xe9crits)"},nullValue:"N/A"},dailyStory:{title:"L'histoire du jour",subtitle:"Une nouvelle histoire tous les jours \xe0 minuit",error:"Une erreur est survenue"},myLibrary:{title:"Biblioth\xe8que",subtitle:"Retrouve toutes tes histoires"},settingsSheet:{title:"Param\xe8tres",actions:"Actions",about:"\xc0 propos",support:"Support",logout:"Se d\xe9connecter",logoutSuccess:"D\xe9connect\xe9 avec succ\xe8s",dangerZone:"Zone de danger",deleteAccount:"Supprimer mon compte",accountDeletionAlert:{title:"Suppression de compte",description:"Cette action est irr\xe9versible et entrainera la suppression de toutes vos donn\xe9es.",cancel:"Retour",submit:"Supprimer"},accountDeletionSuccess:"Compte supprim\xe9 avec succ\xe8s"}},en:{hero:{hello:"Hello,",guest:"Guest"},statistics:{title:"Statistics",stats:{users:"Users",trees:"Trees (Supported languages)",stories:"Branches (Stories)",sentences:"Leafs (Written paragraphs)"},nullValue:"N/A"},dailyStory:{title:"Today's story",subtitle:"A new story every day at midnight",error:"Something went wrong"},myLibrary:{title:"Library",subtitle:"Find all your stories"},settingsSheet:{title:"Settings",actions:"Actions",about:"About",support:"Support",logout:"Logout",logoutSuccess:"Successfully logged out",dangerZone:"Danger zone",deleteAccount:"Delete my account",accountDeletionAlert:{title:"Account deletion",description:"This action is irreversible and will delete all your datas from the application.",cancel:"Cancel",submit:"Delete"},accountDeletionSuccess:"Account successfully deleted"}}},j={fr:{listInfoHeader:"Vous avez \xe9t\xe9 plac\xe9 al\xe9atoirement sur une branche",write:"\xc9crire"},en:{listInfoHeader:"You've been randomly placed on a branch",write:"Write"}},O={fr:{title:"Enregistr\xe9 avec succ\xe8s",partialStoryLink:"C'est reparti",homeLink:"Accueil"},en:{title:"Successfully saved",partialStoryLink:"Let's do it again",homeLink:"Home"}},v={fr:{pageInfo:"Vous trouverez ici toutes les histoires auxquelles vous avez particip\xe9.\nVous comptabilisez {{sentencesCount}} participation(s).",emptyLibrary:"Wow, tellement vide",misc:{dateFormat:"dd/MM/yyyy HH:mm"}},en:{pageInfo:"You'll find here every story you've participated in.\nYou've participated {{sentencesCount}} time(s).",emptyLibrary:"Wow, such empty",misc:{dateFormat:"dd/MM/yyyy hh:mm aaa"}}},x={fr:{completedTitle:"Compl\xe9t\xe9e le",dateFormat:"dd/MM/yy '\xe0' HH:mm"},en:{completedTitle:"Completed the",dateFormat:"dd/MM/yy 'at' hh:mm aaa"}},S={fr:{login:p.fr,register:m.fr,onboarding:g.fr,home:y.fr,partialStory:j.fr,participationSuccess:O.fr,library:v.fr,storyViewer:x.fr,forgotPassword:h.fr},en:{login:p.en,register:m.en,onboarding:g.en,home:y.en,partialStory:j.en,participationSuccess:O.en,library:v.en,storyViewer:x.en,forgotPassword:h.en}},w={fr:{close:"Fermer"},en:{close:"Close"}},P={fr:{backTitle:"Retour",screens:{login:"Se connecter",register:"Cr\xe9er un compte",forgotPassword:"Mot de passe oubli\xe9",partialStory:"Participer",storyViewer:"Lecteur",library:"Biblioth\xe8que"}},en:{backTitle:"Back",screens:{login:"Login",register:"Register",forgotPassword:"Forgot password",partialStory:"Participate",storyViewer:"Reader",library:"Library"}}},k={fr:{report:"Signaler",reportSuccessfull:"Signal\xe9 avec succ\xe8s",markCompleted:"Voter pour terminer",markCompletedSuccessfull:"Vote pris en compte",deletedUser:"Inconnu",misc:{dateFormat:"dd/MM/yy HH:mm"}},en:{report:"Report",reportSuccessfull:"Successfully reported",markCompleted:"Mark completed",markCompletedSuccessfull:"Vote registered",deletedUser:"Unknown",misc:{dateFormat:"dd/MM/yy hh:mm aaa"}}},C={fr:{title:"Rendez-vous sur votre boite mail",subTitle:"Nous vous avons envoy\xe9 un code de v\xe9rification par email.",resendCode:"Renvoyer le code"},en:{title:"Check your email",subTitle:"We've sent you a verification code by email.",resendCode:"Resend code"}},I={fr:{participate:"Participer"},en:{participate:"Participate"}},L={fr:{snackbar:w.fr,app:P.fr,sentencesList:k.fr,codeValidationModal:C.fr,participationFab:I.fr},en:{snackbar:w.en,app:P.en,sentencesList:k.en,codeValidationModal:C.en,participationFab:I.en}},T={fr:{_Default:"Une erreur est survenue",InvalidLoginOrPassword:"Nom d'utilisateur ou mot de passe invalide",InvalidEmailFormat:"Format d'email invalide",EmailTaken:"Adresse email d\xe9j\xe0 utilis\xe9e",InvalidValidationCode:"Code de v\xe9rification invalide",InvalidUsernameLength:"Nom d'utilisateur trop court/long",InvalidUsernameChar:"Le nom d'utilisateur contient un caract\xe8re invalide",UsernameTaken:"Nom d'utilisateur d\xe9j\xe0 utilis\xe9",InvalidSentenceLength:"Taille de paragraphe invalide",ResourceNotFound:"Resource non trouv\xe9e",SpamDetected:"Spam d\xe9tect\xe9",InsufficientPermission:"Permissions insufisantes",InvalidArgument:"Argument invalide",SentenceAlreadyPartOfStory:"Le paragraphe fait d\xe9j\xe0 parti d'une histoire",SentenceAlreadyReported:"Paragraphe d\xe9j\xe0 signal\xe9",SentenceAlreadyMarkedComplete:"Paragraphe d\xe9j\xe0 vot\xe9 comme point de terminaison"},en:{_Default:"An error has occured",InvalidLoginOrPassword:"Invalid login or password",InvalidEmailFormat:"Invalid email format",EmailTaken:"Email already taken",InvalidValidationCode:"Invalid verification code",InvalidUsernameLength:"Username too short/long",InvalidUsernameChar:"Username contains an invalid character",UsernameTaken:"Username already taken",InvalidSentenceLength:"Invalid sentence length",ResourceNotFound:"Resource not found",SpamDetected:"Spam detected",InsufficientPermission:"Insufficient permission",InvalidArgument:"Invalid argument",SentenceAlreadyPartOfStory:"Sentence already part of a story",SentenceAlreadyReported:"Sentence already reported",SentenceAlreadyMarkedComplete:"Sentence already voted as termination point"}},A={fr:{common:L.fr,screens:S.fr,errors:T.fr},en:{common:L.en,screens:S.en,errors:T.en}},R={en:A.en,fr:A.fr};d.default.use(f.initReactI18next).init({resources:R,lng:null==(r=Object(b.getLocales)()[0])?void 0:r.languageCode,fallbackLng:"en",interpolation:{escapeValue:!1},compatibilityJSON:"v3"});var D=d.default,M=n(20),E=n.n(M),V=n(275),q=n(457),B=n(460),F=n(280),z=new RegExp("^\\w{2,24}$"),H={onboarding:{slide1:n(371),slide2:n(372),slide3:n(373),slide4:n(374),slide5:n(375),slide6:n(376)},home:{treeBackground:n(377)},misc:{empty:n(378)}},U=n(226),$=n(143);function W(){return(W=E()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.secure;return r&&(yield $.isAvailableAsync())?$.setItemAsync(e,t):U.default.setItem(e,t)}))).apply(this,arguments)}function N(){return(N=E()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.secure;return n&&(yield $.isAvailableAsync())?$.getItemAsync(e):U.default.getItem(e)}))).apply(this,arguments)}function _(){return(_=E()((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.secure;return n&&(yield $.isAvailableAsync())?$.deleteItemAsync(e):U.default.removeItem(e)}))).apply(this,arguments)}var Y={setItem:function(e,t){return W.apply(this,arguments)},getItem:function(e){return N.apply(this,arguments)},deleteItem:function(e){return _.apply(this,arguments)}},J=Object(V.createHttpLink)({uri:"https://taale-api.herokuapp.com/"}),Z=Object(F.setContext)(function(){var e=E()((function*(e,t){var n,r=t.headers;void 0===r&&(r={});var i=yield Y.getItem("auth_token",{secure:!0}),a=null==(n=Object(b.getLocales)()[0])?void 0:n.languageCode;return null!==i&&(r.authorization="Bearer "+i),a&&(r["content-language"]=a),{headers:r}}));return function(t,n){return e.apply(this,arguments)}}()),G=new q.ApolloClient({name:"taale-app",version:"1.0",link:Z.concat(J),cache:new B.InMemoryCache({typePolicies:{PublicQuery:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},AuthenticatedQuery:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},PublicMutation:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},AuthenticatedMutation:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}}}})}),K=n(74),Q=n(266),X=n(11),ee=n.n(X),te=n(12),ne=n.n(te),re=n(19),ie=new Map([["short",1e3],["long",3e3],["long",5e3]]),ae=new(function(){function e(){ee()(this,e),this.visible=!1,this.msg="",this.duration=3e3,Object(re.makeObservable)(this,{visible:re.observable,msg:re.observable,duration:re.observable,display:re.action,dismiss:re.action})}return ne()(e,[{key:"display",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.msg=e;var r=n.duration;r?this.duration=null!=(t=ie.get(r))?t:3e3:3e3!=this.duration&&(this.duration=3e3),this.visible=!0}},{key:"dismiss",value:function(){this.visible=!1}}]),e}()),oe=n(3),se=Object(K.observer)((function(){var e=Object(f.useTranslation)("common",{keyPrefix:"snackbar"}).t;return Object(oe.jsx)(Q.default,{visible:ae.visible,onDismiss:function(){ae.dismiss()},duration:ae.duration,action:{label:e("close"),onPress:function(){ae.dismiss()}},children:ae.msg})})),le=n(4),ce=n.n(le),ue=n(1),de=n(5),fe=n(124),be=n(2),pe=n(81),me=n(25),he=n(72),ge=n(61);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=Object(ge.observer)((function(e){var t=e.open,n=e.onClose,r=e.animationDuration,i=e.title,o=e.scrollViewProps,s=e.children,l=.75*Object(fe.default)().height,c=a.a.useRef(new de.default.Value(l)).current,u=a.a.useRef(de.default.timing(c,{toValue:0,duration:r,useNativeDriver:!0})).current,d=a.a.useRef(de.default.timing(c,{toValue:l,duration:r,useNativeDriver:!0})).current;return a.a.useEffect((function(){t?u.start():d.start()}),[t]),Object(oe.jsxs)(de.default.View,{style:[ve.container,{height:l,transform:[{translateY:c}]}],children:[Object(oe.jsxs)(be.default,{style:ve.header,children:[Object(oe.jsx)(me.default,{variant:"titleLarge",style:ve.title,children:i}),Object(oe.jsx)(he.default,{icon:"close",size:32,style:ve.closeBtn,onPress:n})]}),Object(oe.jsx)(pe.default,je(je({},o),{},{children:s}))]})})),ve=ue.default.create({container:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#1a1a1d",borderRadius:16,overflow:"hidden"},header:{width:"100%",backgroundColor:"#110f15",paddingVertical:16},title:{textAlign:"center",color:"whitesmoke"},closeBtn:{position:"absolute",color:"whitesmoke",top:2,right:2}}),xe=Oe,Se=n(10),we="android"===Se.default.OS||"ios"===Se.default.OS,Pe=(Se.default.OS,"macos"===Se.default.OS||Se.default.OS,ue.default.create({container:{flex:1,backgroundColor:"#455d7a"},appWrapper:{width:360,height:"auto",aspectRatio:6/13,margin:"auto",overflow:"hidden",borderRadius:32}})),ke=function(e){var t=e.children;return we?Object(oe.jsx)(i.Fragment,{children:t}):Object(oe.jsx)(be.default,{style:Pe.container,children:Object(oe.jsx)(be.default,{style:Pe.appWrapper,children:t})})},Ce=n(454),Ie=n(453),Le=n(132);function Te(e,t){var n=t.onSuccess,r=t.successMessage,i=t.onError,a=t.errorMessage;return e.then((function(e){return n&&n(e),r&&ae.display(r),e})).catch((function(e){var t;if(i&&i(e),a){switch(typeof a){case"string":return ae.display(a,{duration:"long"});case"boolean":if(!Object(Le.isApolloError)(e))break;var n=null==(t=e.graphQLErrors[0])?void 0:t.extensions.code;if("string"!==typeof n)break;return ae.display(D.t([n,"_Default"],{ns:"errors"}),{duration:"long"})}ae.display(D.t("_Default",{ns:"errors"}),{duration:"long"})}}))}var Ae=n(21),Re=n.n(Ae),De=n(22),Me=n.n(De),Ee=n(13),Ve=n.n(Ee);function qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve()(e);if(t){var i=Ve()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Me()(this,n)}}var Be,Fe,ze=function(e){Re()(n,e);var t=qe(n);function n(e,r){var i;return ee()(this,n),(i=t.call(this)).fetch=e,i.opts=r,i}return ne()(n,[{key:"ensureSuccess",value:function(){return"fulfilled"===this.status?this.result:this.ensureSuccessReload.apply(this,arguments)}},{key:"ensureSuccessReload",value:function(){var e=this.fetch.apply(this,arguments);return this.track(e,this.opts),e}}]),n}(function(){function e(){ee()(this,e),this.lastResult=void 0,this.lastError=void 0,this.status=void 0,this.currentPromise=null,Object(re.makeObservable)(this,{lastResult:re.observable,lastError:re.observable,status:re.observable,setResult:re.action,setError:re.action,reset:re.action,track:re.action,result:re.computed,error:re.computed,tracking:re.computed,loading:re.computed,finished:re.computed})}return ne()(e,[{key:"setResult",value:function(e){this.lastResult=e,this.lastError=void 0,this.status="fulfilled"}},{key:"setError",value:function(e){this.lastError=e,this.lastResult=void 0,this.status="rejected"}},{key:"reset",value:function(){this.lastResult=void 0,this.lastError=void 0,this.status=void 0,this.currentPromise=null}},{key:"result",get:function(){if("pending"!==this.status)return this.lastResult}},{key:"error",get:function(){if("pending"!==this.status)return this.lastError}},{key:"tracking",get:function(){return void 0!==this.status}},{key:"loading",get:function(){return"pending"===this.status}},{key:"finished",get:function(){return"fulfilled"===this.status||"rejected"===this.status}},{key:"track",value:function(e,t){var n=this,r=t.thenUnhandled,i=t.thenDropped,a=t.catchUnhandled,o=t.catchDropped,s=t.finallyUnhandled,l=t.finallyDropped;this.currentPromise=e,this.status="pending",e.then((function(t){e===n.currentPromise?(n.setResult(t),null==r||r(t)):null==i||i(t)})).catch((function(t){e===n.currentPromise?(n.setError(t),null==a||a(t)):null==o||o(t)})).finally((function(){e==n.currentPromise?null==s||s():null==l||l()}))}}]),e}()),He=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ee()(this,e),this.isOpen=t,Object(re.makeObservable)(this,{isOpen:re.observable,open:re.action.bound,close:re.action.bound,toggle:re.action.bound})}return ne()(e,[{key:"open",value:function(){this.isOpen=!0}},{key:"close",value:function(){this.isOpen=!1}},{key:"toggle",value:function(){this.isOpen=!this.isOpen}}]),e}(),Ue=function(){function e(){ee()(this,e),this.loading=!1,Object(re.makeObservable)(this,{loading:re.observable,setLoading:re.action,setLoaded:re.action})}return ne()(e,[{key:"setLoading",value:function(){this.loading=!0}},{key:"setLoaded",value:function(){this.loading=!1}}]),e}(),$e=n(39),We=n.n($e),Ne=n(448),_e=Object(Ne.gql)(Be||(Be=We()(["\nquery DailyStory {\n  public {\n    dailyStory {\n      id\n      createdAt\n    }\n  }\n}\n"])));function Ye(){return Je.apply(this,arguments)}function Je(){return(Je=E()((function*(){return(yield G.query({query:_e})).data.public.dailyStory}))).apply(this,arguments)}var Ze=Object(Ne.gql)(Fe||(Fe=We()(["\nquery GetStatistics {\n  public {\n    statistics {\n      users\n      openTrees\n      stories\n      sentences\n    }\n  }\n}\n"])));function Ge(){return Ke.apply(this,arguments)}function Ke(){return(Ke=E()((function*(){return(yield G.query({query:Ze,fetchPolicy:"no-cache"})).data.public.statistics}))).apply(this,arguments)}var Qe,Xe=new(function(){function e(){ee()(this,e),this.dailyStory=new ze(Ye,{catchUnhandled:console.error}),this.statistics=new ze(Ge,{catchUnhandled:console.error}),this.settingsOpenState=new He}return ne()(e,[{key:"pullRefresh",value:function(){return Promise.all([this.dailyStory.ensureSuccessReload(),this.statistics.ensureSuccessReload()])}},{key:"refresh",value:function(){return Promise.all([this.dailyStory.ensureSuccess(),this.statistics.ensureSuccess()])}}]),e}()),et=Object(Ne.gql)(Qe||(Qe=We()(["\nquery PartialStory {\n  authenticated {\n    partialStory {\n      id\n      text\n      parentSentenceId\n      owner {\n        id\n        username\n      }\n      createdAt\n      updatedAt\n    }\n  }\n}\n"])));function tt(){return nt.apply(this,arguments)}function nt(){return(nt=E()((function*(){return(yield G.query({query:et,fetchPolicy:"no-cache"})).data.authenticated.partialStory}))).apply(this,arguments)}var rt,it,at=new(function(){function e(){ee()(this,e),this.partialStory=new ze(tt,{catchUnhandled:console.error}),Object(re.makeObservable)(this,{lastSentence:re.computed})}return ne()(e,[{key:"lastSentence",get:function(){var e=this.partialStory.result;return!e||e.length<=0?null:e[e.length-1]}},{key:"refresh",value:function(){return this.partialStory.ensureSuccessReload()}}]),e}()),ot=Object(Ne.gql)(rt||(rt=We()(["\nquery MyStories {\n  authenticated {\n    myStories {\n      id\n      title\n      createdAt\n    }\n  }\n}\n"])));function st(){return lt.apply(this,arguments)}function lt(){return(lt=E()((function*(){return(yield G.query({query:ot})).data.authenticated.myStories}))).apply(this,arguments)}var ct=Object(Ne.gql)(it||(it=We()(["\nquery Statistics {\n  authenticated {\n    statistics {\n      mySentences\n    }\n  }\n}\n"])));function ut(){return dt.apply(this,arguments)}function dt(){return(dt=E()((function*(){return(yield G.query({query:ct})).data.authenticated.statistics.mySentences}))).apply(this,arguments)}var ft=new(function(){function e(){ee()(this,e),this.stories=new ze(st,{catchUnhandled:console.error}),this.mySentencesCount=new ze(ut,{catchUnhandled:console.error})}return ne()(e,[{key:"refresh",value:function(){var e=E()((function*(){yield this.stories.ensureSuccessReload(),yield this.mySentencesCount.ensureSuccessReload()}));return function(){return e.apply(this,arguments)}}()}]),e}());function bt(){Te(Xe.refresh(),{successMessage:null,errorMessage:!0})}function pt(){Te(at.refresh(),{successMessage:null,errorMessage:!0})}function mt(){Te(ft.refresh(),{successMessage:null,errorMessage:!0})}var ht,gt,yt=n(106),jt=n.n(yt),Ot=Object(Ne.gql)(ht||(ht=We()(["\nmutation Login($email: String!, $password: String!) {\n  public {\n    account {\n      login(email: $email, password: $password) {\n        user {\n          id\n          username\n          email\n          role\n          createdAt\n          updatedAt\n        }\n        token\n      }\n    }\n  }\n}\n"])));var vt,xt=Object(Ne.gql)(gt||(gt=We()(["\nmutation Register($username: String!, $email: String!, $password: String!, $emailValidationCode: String!) {\n  public {\n    account {\n      register(username: $username, email: $email, password: $password, emailValidationCode: $emailValidationCode)\n    }\n  }\n}\n"])));function St(e){return G.mutate({mutation:xt,variables:e})}var wt,Pt=Object(Ne.gql)(vt||(vt=We()(["\nquery Account {\n  authenticated {\n    account {\n      id\n      username\n      email\n      role\n      createdAt\n      updatedAt\n    }\n  }\n}\n"])));function kt(){return(kt=E()((function*(){return(yield G.query({query:Pt})).data.authenticated.account}))).apply(this,arguments)}var Ct,It=Object(Ne.gql)(wt||(wt=We()(["\nquery UsernameAvailability($username: String!) {\n  public {\n    account {\n      usernameAvailability(username: $username)\n    }\n  }\n}\n"])));function Lt(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=E()((function*(e){return(yield G.query({query:It,variables:e})).data.public.account.usernameAvailability}))).apply(this,arguments)}var At,Rt=Object(Ne.gql)(Ct||(Ct=We()(["\nmutation VerifyEmail($email: String!) {\n  public {\n    account {\n      verifyEmail(email: $email)\n    }\n  }\n}\n"])));function Dt(e){return G.mutate({mutation:Rt,variables:e})}var Mt,Et=Object(Ne.gql)(At||(At=We()(["\nmutation($email: String!) {\n  public {\n    account {\n      resendEmailVerificationCode(email: $email)\n    }\n  }\n}\n"])));function Vt(e){return G.mutate({mutation:Et,variables:e})}var qt,Bt=Object(Ne.gql)(Mt||(Mt=We()(["\nmutation DeleteAccount {\n  authenticated {\n    account {\n      deleteAccount\n    }\n  }\n}\n"])));var Ft,zt=Object(Ne.gql)(qt||(qt=We()(["\nmutation ForgotPassword($email: String!) {\n  public {\n    account {\n      forgotPassword(email: $email)\n    }\n  }\n}\n"])));function Ht(e){return G.mutate({mutation:zt,variables:e})}var Ut=Object(Ne.gql)(Ft||(Ft=We()(["\nmutation ResetPassword(\n  $email: String!\n  $newPassword: String!\n  $validationCode: String!\n) {\n  public {\n    account {\n      resetPassword(\n        email: $email\n        newPassword: $newPassword\n        validationCode: $validationCode\n      )\n    }\n  }\n}\n"])));function $t(e){return G.mutate({mutation:Ut,variables:e})}var Wt=new(function(){function e(){ee()(this,e),this.user=null,this.register=St,this.usernameAvailability=Lt,this.verifyEmail=Dt,this.resendEmailVerificationCode=Vt,this.forgotPassword=Ht,this.resetPassword=$t,Object(re.makeObservable)(this,{user:re.observable,setUser:re.action,loggedIn:re.computed,loggedOut:re.computed})}return ne()(e,[{key:"setUser",value:function(e){this.user=e}},{key:"loggedIn",get:function(){return null!==this.user}},{key:"loggedOut",get:function(){return null===this.user}},{key:"login",value:function(){var e=E()((function*(e){var t=(yield function(e){return G.mutate({mutation:Ot,variables:e})}(e)).data;jt()(t);var n=t.public.account.login,r=n.user,i=n.token;this.setUser(r),yield Y.setItem("auth_token",i,{secure:!0})}));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=E()((function*(){yield Y.deleteItem("auth_token",{secure:!0}),this.setUser(null)}));return function(){return e.apply(this,arguments)}}()},{key:"refreshAccount",value:function(){var e=E()((function*(){if(null!==(yield Y.getItem("auth_token",{secure:!0}))){var e=yield function(){return kt.apply(this,arguments)}();this.setUser(e)}}));return function(){return e.apply(this,arguments)}}()},{key:"deleteAccount",value:function(){var e=E()((function*(){yield G.mutate({mutation:Bt}),yield this.logout()}));return function(){return e.apply(this,arguments)}}()}]),e}()),Nt=function(){function e(){ee()(this,e),this.onboardingCompleted=null,Object(re.makeObservable)(this,{onboardingCompleted:re.observable,setOnboardingCompleted:re.action})}return ne()(e,[{key:"setOnboardingCompleted",value:function(e){this.onboardingCompleted=e}},{key:"saveOnboardingCompleted",value:function(){return Y.setItem(e.OnboardingStorageKey,"completed")}},{key:"refresh",value:function(){var t=E()((function*(){var t=yield Y.getItem(e.OnboardingStorageKey);this.setOnboardingCompleted(null!==t||!we)}));return function(){return t.apply(this,arguments)}}()}]),e}();Nt.OnboardingStorageKey="onboaring";var _t=new Nt;function Yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve()(e);if(t){var i=Ve()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Me()(this,n)}}var Jt,Zt,Gt=new(function(e){Re()(n,e);var t=Yt(n);function n(){var e;return ee()(this,n),(e=t.call(this)).refresh().catch(console.warn),e}return ne()(n,[{key:"refresh",value:function(){var e=E()((function*(){this.setLoading(),yield Promise.allSettled([_t.refresh(),Wt.refreshAccount(),Xe.refresh()]),this.setLoaded()}));return function(){return e.apply(this,arguments)}}()}]),n}(Ue)),Kt=n(309),Qt=ue.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#2b2b2b"}}),Xt=function(){return Object(oe.jsx)(be.default,{style:Qt.container,children:Object(oe.jsx)(Kt.default,{size:"large"})})},en=n(151),tn=n(8),nn=n.n(tn),rn=n(128),an=n(121),on=n(188),sn=n(16),ln=n.n(sn),cn=n(461),un=n(53),dn=n(167),fn=Object(Ne.gql)(Jt||(Jt=We()(["\nmutation($sentenceId: Int) {\n  authenticated {\n    sentence(id: $sentenceId) {\n      report\n    }\n  }\n}\n"])));function bn(e){return G.mutate({mutation:fn,variables:e})}var pn,mn=Object(Ne.gql)(Zt||(Zt=We()(["\nmutation Sentence($sentenceId: Int) {\n  authenticated {\n    sentence(id: $sentenceId) {\n      markCompleted\n    }\n  }\n}\n"])));function hn(e){return G.mutate({mutation:mn,variables:e})}var gn=Object(Ne.gql)(pn||(pn=We()(["\nmutation CreateSentence($parentSentenceId: Int!, $text: String!) {\n  authenticated {\n    sentence {\n      create(parentSentenceId: $parentSentenceId, text: $text) {\n        id\n      }\n    }\n  }\n}\n"])));function yn(e){return G.mutate({mutation:gn,variables:e})}var jn=new(ne()((function e(){ee()(this,e),this.report=bn,this.markCompleted=hn,this.create=yn}))),On=ue.default.create({text:{fontSize:16,color:"#fafafa",lineHeight:32},userTitle:{fontSize:12,fontWeight:"bold"}}),vn=function(e){var t,n,r=e.sentence,i=e.disableControls,o=e.onReport,s=e.onMarkedCompleted,l=Object(f.useTranslation)("common",{keyPrefix:"sentencesList"}).t,c=a.a.useState(!1),u=ln()(c,2),d=u[0],b=u[1];return Object(oe.jsxs)(dn.default,{visible:d,onDismiss:function(){return b(!1)},anchor:Object(oe.jsx)(un.default,{style:[On.text,{fontWeight:Wt.user&&(null==(t=r.owner)?void 0:t.id)===Wt.user.id?"bold":void 0}],onPress:function(){return b(!0)},children:r.text}),anchorPosition:"bottom",children:[Object(oe.jsx)(dn.default.Item,{titleStyle:On.userTitle,title:((null==(n=r.owner)?void 0:n.username)||l("deletedUser"))+" - "+Object(cn.default)(r.createdAt,l("misc.dateFormat"))}),Object(oe.jsx)(on.default,{}),Object(oe.jsx)(dn.default.Item,{title:l("report"),leadingIcon:"alert",disabled:i||null===r.parentSentenceId,onPress:function(){Te(jn.report({sentenceId:r.id}),{successMessage:l("reportSuccessfull"),onSuccess:function(){b(!1),null==o||o(r)},errorMessage:!0})}}),Object(oe.jsx)(dn.default.Item,{title:l("markCompleted"),leadingIcon:"check-circle",disabled:i||null===r.parentSentenceId,onPress:function(){Te(jn.markCompleted({sentenceId:r.id}),{successMessage:l("markCompletedSuccessfull"),onSuccess:function(){b(!1),null==s||s(r)},errorMessage:!0})}})]})},xn=["disableControls","onReport","onMarkedCompleted"];function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pn=function(e){var t=e.disableControls,n=e.onReport,r=e.onMarkedCompleted,i=nn()(e,xn);return Object(oe.jsx)(rn.default,wn(wn({},i),{},{renderItem:function(e){var i=e.item;return Object(oe.jsx)(vn,{sentence:i,disableControls:t,onReport:n,onMarkedCompleted:r})},keyExtractor:function(e){return e.id.toString()},ListEmptyComponent:an.default,ItemSeparatorComponent:function(){return Object(oe.jsx)(on.default,{bold:!0,style:{width:"8%",backgroundColor:"burlywood"}})}}))},kn=n(51),Cn=n(189),In=n(263),Ln=n(122),Tn=["codeLength","onCodeChange","onCodeCompleted","onResendCode"];function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dn=ue.default.create({container:{margin:20,backgroundColor:"#404040",padding:20,borderRadius:20,borderWidth:4,borderColor:"#333333"},title:{fontWeight:"bold",marginVertical:10},subtitle:{marginBottom:20},codeInput:{fontSize:32,height:64,textAlign:"center"},resendCodeBtn:{marginTop:25}}),Mn=function(e){var t=e.codeLength,n=e.onCodeChange,r=e.onCodeCompleted,i=e.onResendCode,o=nn()(e,Tn),s=Object(f.useTranslation)("common",{keyPrefix:"codeValidationModal"}).t,l=a.a.useState(!1),c=ln()(l,2),u=c[0],d=c[1],b=a.a.useMemo((function(){return"".padStart(t,"-")}),[t]);return Object(oe.jsxs)(Cn.default,Rn(Rn({},o),{},{dismissable:!1,contentContainerStyle:Dn.container,children:[Object(oe.jsx)(me.default,{variant:"titleLarge",style:Dn.title,children:s("title")}),Object(oe.jsx)(me.default,{variant:"titleSmall",style:Dn.subtitle,children:s("subTitle")}),Object(oe.jsx)(In.default,{mode:"outlined",textAlign:"center",placeholder:b,style:Dn.codeInput,textContentType:"oneTimeCode",keyboardType:"number-pad",maxLength:t,onChangeText:function(e){null==n||n(e),e.length>=t&&(kn.default.dismiss(),r(e))}}),Object(oe.jsx)(Ln.default,{icon:"reload",style:Dn.resendCodeBtn,onPress:function(){d(!0),setTimeout((function(){d(!1)}),3e4),i()},disabled:u,children:s("resendCode")})]}))},En=n(265),Vn=n(69),qn=ue.default.create({fab:{position:"absolute",right:40,bottom:50}}),Bn=function(){var e=Object(Vn.useNavigation)(),t=Object(f.useTranslation)("common",{keyPrefix:"participationFab"}).t;return Object(oe.jsx)(En.default,{icon:"pencil-plus",label:t("participate"),style:qn.fab,onPress:function(){null!==Wt.user?e.navigate("PartialStory"):e.navigate("Login")}})},Fn=n(319),zn=Object(ge.observer)((function(){var e,t,n=Object(f.useTranslation)("screens",{keyPrefix:"home.hero"}).t;return Object(oe.jsx)(Fn.default,{source:H.home.treeBackground,resizeMode:"cover",style:Hn.container,children:Object(oe.jsxs)(be.default,{style:Hn.textOverlay,children:[Object(oe.jsx)(me.default,{variant:"titleLarge",children:n("hello")}),Object(oe.jsx)(me.default,{variant:"headlineLarge",style:{fontWeight:"bold"},children:(null!=(e=null==(t=Wt.user)?void 0:t.username)?e:n("guest"))+"."}),Object(oe.jsx)(he.default,{icon:"cog",size:30,style:Hn.settingsIcon,onPress:Xe.settingsOpenState.toggle})]})})})),Hn=ue.default.create({container:{width:"100%",minHeight:250,borderBottomLeftRadius:24,borderBottomRightRadius:24,overflow:"hidden"},textOverlay:{flex:1,paddingTop:60,paddingLeft:30,backgroundColor:"rgba(40,40,40, 0.5)"},settingsIcon:{position:"absolute",top:40,right:5}}),Un=zn,$n=n(190),Wn=n(27);function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yn=Object(ge.observer)((function(){var e=Object(f.useTranslation)("screens",{keyPrefix:"home.statistics"}).t,t=function(t){return void 0!==t?t.toString():e("nullValue")},n=Xe.statistics.lastResult;return Object(oe.jsxs)($n.default,{style:Jn.container,children:[Object(oe.jsx)($n.default.Title,{title:e("title"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(oe.jsx)(Wn.Avatar.Icon,_n(_n({},e),{},{icon:"chart-donut",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}}))}}),Object(oe.jsxs)($n.default.Content,{children:[Object(oe.jsx)(Wn.List.Item,{title:t(null==n?void 0:n.users),description:e("stats.users"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,_n(_n({},e),{},{icon:"account-group"}))},style:Jn.itemStyle}),Object(oe.jsx)(Wn.List.Item,{title:t(null==n?void 0:n.openTrees),description:e("stats.trees"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,_n(_n({},e),{},{icon:"pine-tree"}))},style:Jn.itemStyle}),Object(oe.jsx)(Wn.List.Item,{title:t(null==n?void 0:n.stories),description:e("stats.stories"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,_n(_n({},e),{},{icon:"book-open-variant"}))},style:Jn.itemStyle}),Object(oe.jsx)(Wn.List.Item,{title:t(null==n?void 0:n.sentences),description:e("stats.sentences"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,_n(_n({},e),{},{icon:"send"}))},style:Jn.itemStyle})]})]})})),Jn=ue.default.create({container:{marginTop:20,backgroundColor:"#323232"},itemStyle:{paddingVertical:0}}),Zn=Yn;function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=Object(ge.observer)((function(){var e=Object(Vn.useNavigation)(),t=Object(f.useTranslation)("screens",{keyPrefix:"home.dailyStory"}).t;return Object(oe.jsx)($n.default,{style:Xn.container,onPress:function(){var t,n=null==(t=Xe.dailyStory.lastResult)?void 0:t.id;jt()(void 0!==n),e.navigate("StoryViewer",{storyId:n})},children:Object(oe.jsx)($n.default.Title,{title:t("title"),subtitle:t("subtitle"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(oe.jsx)(Wn.Avatar.Icon,Kn(Kn({},e),{},{icon:"calendar-today",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}}))}})})})),Xn=ue.default.create({container:{marginTop:20,backgroundColor:"#323232"}}),er=Qn,tr=ue.default.create({container:{marginTop:20,backgroundColor:"#323232"}}),nr=function(){var e=Object(f.useTranslation)("screens",{keyPrefix:"home.myLibrary"}).t,t=Object(Vn.useNavigation)();return Object(oe.jsx)($n.default,{style:tr.container,onPress:function(){null!==Wt.user?t.navigate("Library"):t.navigate("Login")},children:Object(oe.jsx)($n.default.Title,{title:e("title"),subtitle:e("subtitle"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(oe.jsx)(Wn.Avatar.Icon,{icon:"bookshelf",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}})}})})},rr=n(320),ir=n(242);function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sr=Object(ge.observer)((function(){var e=Object(f.useTranslation)("screens",{keyPrefix:"home.settingsSheet"}).t,t=Object(Vn.useNavigation)();return Object(oe.jsxs)(xe,{title:e("title"),onClose:Xe.settingsOpenState.close,open:Xe.settingsOpenState.isOpen,animationDuration:250,scrollViewProps:{style:{padding:10}},children:[Wt.user&&Object(oe.jsx)(Wn.List.Item,{title:Wt.user.username,description:Wt.user.email,left:function(e){return Object(oe.jsx)(Wn.List.Icon,or(or({},e),{},{icon:"account"}))},style:{marginBottom:10}}),Object(oe.jsxs)(Wn.List.Section,{children:[Object(oe.jsx)(Wn.List.Subheader,{children:e("actions")}),Object(oe.jsx)(Wn.List.Item,{title:e("about"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,or(or({},e),{},{icon:"information"}))},onPress:function(){Xe.settingsOpenState.close(),t.navigate("Onboarding")}}),Object(oe.jsx)(Wn.List.Item,{title:e("support"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,or(or({},e),{},{icon:"face-agent"}))},onPress:function(){ir.default.canOpenURL("https://www.baptech.fr/").then((function(e){e&&ir.default.openURL("https://www.baptech.fr/").catch(console.error)})).catch(console.error)}}),Wt.loggedIn&&Object(oe.jsx)(Wn.List.Item,{title:e("logout"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,or(or({},e),{},{icon:"logout"}))},onPress:function(){Te(Wt.logout(),{successMessage:e("logoutSuccess"),onSuccess:Xe.settingsOpenState.close,errorMessage:!0})}})]}),Wt.loggedIn&&Object(oe.jsxs)(Wn.List.Section,{style:{borderWidth:1,borderColor:"rgba(255, 77, 77, .5)",marginTop:20},children:[Object(oe.jsx)(Wn.List.Subheader,{children:e("dangerZone")}),Object(oe.jsx)(Wn.List.Item,{title:e("deleteAccount"),left:function(e){return Object(oe.jsx)(Wn.List.Icon,or(or({},e),{},{icon:"delete"}))},onPress:function(){rr.default.alert(e("accountDeletionAlert.title"),e("accountDeletionAlert.description"),[{text:e("accountDeletionAlert.cancel"),style:"cancel"},{text:e("accountDeletionAlert.submit"),style:"destructive",onPress:function(){Te(Wt.deleteAccount(),{successMessage:e("accountDeletionSuccess"),errorMessage:!0})}}])}})]})]})})),lr=Object(ge.observer)((function(e){return Object(oe.jsxs)(be.default,{style:cr.container,children:[Object(oe.jsxs)(pe.default,{refreshControl:Object(oe.jsx)(en.default,{refreshing:Xe.dailyStory.loading||Xe.statistics.loading,onRefresh:function(){Te(Xe.pullRefresh(),{successMessage:null,errorMessage:!0})}}),children:[Object(oe.jsx)(Un,{}),Object(oe.jsxs)(be.default,{style:cr.cardsContainer,children:[Xe.dailyStory.lastResult&&Object(oe.jsx)(er,{}),Object(oe.jsx)(nr,{}),Object(oe.jsx)(Zn,{})]})]}),Object(oe.jsx)(Bn,{}),Object(oe.jsx)(sr,{})]})})),cr=ue.default.create({container:{flex:1},cardsContainer:{paddingHorizontal:10},fab:{position:"absolute",right:40,bottom:50}}),ur=lr,dr=n(84),fr=n(127),br=n(452),pr=n(99),mr=n(68),hr=mr.object().shape({email:mr.string().email().required(),password:mr.string().required()}),gr=ue.default.create({container:{flex:1},formContainer:{marginHorizontal:20},headline:{marginBottom:20},textField:{marginVertical:5},button:{marginTop:20}}),yr=function(e){var t=e.navigation,n=Object(f.useTranslation)("screens",{keyPrefix:"login"}).t,r=Object(br.default)();return Object(oe.jsx)(dr.default,{style:gr.container,children:Object(oe.jsx)(fr.default,{behavior:"ios"===Se.default.OS?"padding":"height",keyboardVerticalOffset:r,style:{flex:1,justifyContent:"center"},children:Object(oe.jsx)(pr.Formik,{initialValues:{email:"",password:""},validationSchema:hr,onSubmit:function(e){return kn.default.dismiss(),Te(Wt.login(e),{successMessage:null,errorMessage:!0,onSuccess:function(){t.reset({index:0,routes:[{name:"Home"}]})}})},children:function(e){var r=e.handleChange,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(oe.jsxs)(be.default,{style:gr.formContainer,children:[Object(oe.jsxs)(be.default,{style:gr.headline,children:[Object(oe.jsx)(me.default,{variant:"headlineLarge",children:n("form.headlineTitle")}),Object(oe.jsx)(me.default,{variant:"titleSmall",children:n("form.headlineDescription")})]}),Object(oe.jsx)(In.default,{label:n("form.email"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(oe.jsx)(In.default.Icon,{icon:"email"}),style:gr.textField,value:a.email,onChangeText:r("email"),error:Boolean(o.email)&&s.email}),Object(oe.jsx)(In.default,{label:n("form.password"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(oe.jsx)(In.default.Icon,{icon:"lock"}),style:gr.textField,value:a.password,onChangeText:r("password"),error:Boolean(o.password)&&s.password}),Object(oe.jsx)(Ln.default,{mode:"contained",style:gr.button,disabled:l,loading:l,onPress:function(){i()},children:n("form.submit")}),Object(oe.jsx)(Ln.default,{mode:"outlined",style:gr.button,onPress:function(){t.navigate("Register")},children:n("form.register")}),Object(oe.jsx)(Ln.default,{mode:"text",style:gr.button,onPress:function(){return t.navigate("ForgotPassword")},children:n("form.forgotPassword")})]})}})})})},jr=n(260);function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vr=mr.object().shape({username:mr.string().min(2).max(24).matches(z).required(),email:mr.string().email().required(),password:mr.string().min(4).required()}),xr=ue.default.create({container:{flex:1},formContainer:{marginHorizontal:20},headline:{marginBottom:20},textField:{marginVertical:5},button:{marginTop:20}}),Sr=function(e){var t=e.navigation,n=Object(f.useTranslation)("screens",{keyPrefix:"register"}).t,r=Object(br.default)(),i=a.a.useState(!1),o=ln()(i,2),s=o[0],l=o[1],c=a.a.useRef(null);return Object(oe.jsxs)(dr.default,{style:xr.container,children:[Object(oe.jsx)(fr.default,{behavior:"ios"===Se.default.OS?"padding":"height",keyboardVerticalOffset:r,style:{flex:1,justifyContent:"center"},children:Object(oe.jsx)(pr.Formik,{initialValues:{username:"",email:"",password:""},validationSchema:vr,onSubmit:function(e){var t=e.email;return kn.default.dismiss(),c.current=e,Te(Wt.verifyEmail({email:t}),{successMessage:null,onSuccess:function(){return l(!0)},errorMessage:!0})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(oe.jsxs)(be.default,{style:xr.formContainer,children:[Object(oe.jsxs)(be.default,{style:xr.headline,children:[Object(oe.jsx)(me.default,{variant:"headlineLarge",children:n("form.headlineTitle")}),Object(oe.jsx)(me.default,{variant:"titleSmall",children:n("form.headlineDescription")})]}),Object(oe.jsx)(In.default,{label:n("form.username"),mode:"outlined",textContentType:"username",right:Object(oe.jsx)(In.default.Icon,{icon:"account-circle"}),value:a.username,onChangeText:t("username"),onBlur:r("username"),error:Boolean(o.username)&&s.username}),Boolean(o.username)&&s.username&&Object(oe.jsx)(jr.default,{type:"error",children:n("form.usernameHelper")}),Object(oe.jsx)(In.default,{label:n("form.email"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(oe.jsx)(In.default.Icon,{icon:"email"}),style:xr.textField,value:a.email,onChangeText:t("email"),onBlur:r("email"),error:Boolean(o.email)&&s.email}),Object(oe.jsx)(In.default,{label:n("form.password"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(oe.jsx)(In.default.Icon,{icon:"lock"}),style:xr.textField,value:a.password,onChangeText:t("password"),onBlur:r("password"),error:Boolean(o.password)&&s.password}),Object(oe.jsx)(Ln.default,{mode:"contained",style:xr.button,disabled:l,loading:l,onPress:function(){i()},children:n("form.submit")})]})}})}),Object(oe.jsx)(Mn,{visible:s,codeLength:6,onResendCode:function(){var e,t=null==(e=c.current)?void 0:e.email;jt()(void 0!==t),Te(Wt.resendEmailVerificationCode({email:t}),{successMessage:null,errorMessage:!0})},onCodeCompleted:function(e){jt()(null!==c.current),Te(Wt.register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({emailValidationCode:e},c.current)),{successMessage:n("form.registerSuccess"),onSuccess:function(){l(!1),t.navigate("Login")},errorMessage:!0})}})]})},wr=mr.object().shape({email:mr.string().email().required()}),Pr=function(e){var t=e.onEmailSubmited,n=Object(f.useTranslation)("screens",{keyPrefix:"forgotPassword.forgotPasswordForm"}).t;return Object(oe.jsx)(pr.Formik,{initialValues:{email:""},validationSchema:wr,onSubmit:function(e){var n=e.email;return Te(Wt.forgotPassword({email:n}),{successMessage:null,onSuccess:function(){return t(n)},errorMessage:!0,onError:function(){return kn.default.dismiss()}})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(oe.jsxs)(be.default,{children:[Object(oe.jsxs)(be.default,{style:{marginBottom:32},children:[Object(oe.jsx)(me.default,{variant:"headlineLarge",children:n("title")}),Object(oe.jsx)(me.default,{variant:"titleSmall",children:n("subtitle")})]}),Object(oe.jsx)(In.default,{label:n("emailLabel"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(oe.jsx)(In.default.Icon,{icon:"email"}),value:a.email,onChangeText:t("email"),onBlur:r("email"),error:Boolean(o.email)&&s.email}),Object(oe.jsx)(Ln.default,{mode:"contained",disabled:l,loading:l,onPress:function(){return i()},style:{marginTop:32},children:n("submit")})]})}})};function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ir=mr.object().shape({newPassword:mr.string().min(4).required(),validationCode:mr.string().min(8).required()}),Lr=function(e){var t=e.email,n=Object(f.useTranslation)("screens",{keyPrefix:"forgotPassword.resetPasswordForm"}).t,r=Object(Vn.useNavigation)();return Object(oe.jsx)(pr.Formik,{initialValues:{newPassword:"",validationCode:""},validationSchema:Ir,onSubmit:function(e){return Te(Wt.resetPassword(Cr(Cr({},e),{},{email:t})),{successMessage:null,onSuccess:function(){return r.navigate("Login")},errorMessage:!0,onError:function(){return kn.default.dismiss()}})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(oe.jsxs)(be.default,{children:[Object(oe.jsxs)(be.default,{style:{marginBottom:32},children:[Object(oe.jsx)(me.default,{variant:"headlineLarge",children:n("title")}),Object(oe.jsx)(me.default,{variant:"titleSmall",children:n("subtitle")})]}),Object(oe.jsx)(In.default,{label:n("newPasswordLabel"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(oe.jsx)(In.default.Icon,{icon:"lock"}),value:a.newPassword,onChangeText:t("newPassword"),onBlur:r("newPassword"),error:Boolean(o.newPassword)&&s.newPassword}),Object(oe.jsx)(In.default,{label:n("validationCodeLabel"),mode:"outlined",autoCapitalize:"characters",right:Object(oe.jsx)(In.default.Icon,{icon:"numeric"}),maxLength:8,value:a.validationCode,onChangeText:t("validationCode"),onBlur:r("validationCode"),error:Boolean(o.validationCode)&&s.validationCode,style:{marginTop:10}}),Object(oe.jsx)(Ln.default,{mode:"contained",disabled:l,loading:l,onPress:function(){return i()},style:{marginTop:32},children:n("submit")})]})}})},Tr=ue.default.create({container:{flex:1,justifyContent:"center",paddingHorizontal:20}}),Ar=function(e){var t=Object(br.default)(),n=a.a.useState(null),r=ln()(n,2),i=r[0],o=r[1];return Object(oe.jsx)(dr.default,{style:{flex:1},children:Object(oe.jsx)(fr.default,{behavior:"ios"===Se.default.OS?"padding":"height",keyboardVerticalOffset:t,style:{flex:1},children:Object(oe.jsx)(be.default,{style:Tr.container,children:null===i?Object(oe.jsx)(Pr,{onEmailSubmited:function(e){o(e)}}):Object(oe.jsx)(Lr,{email:i})})})})},Rr=n(55),Dr=ue.default.create({container:{flex:1},image:{flex:.7,width:"100%",resizeMode:"contain"},texts:{flex:.3,alignItems:"center"},title:{marginBottom:20,fontSize:32,fontWeight:"bold",color:"whitesmoke",textAlign:"center"},description:{paddingHorizontal:40,fontSize:16,fontWeight:"500",color:"whitesmoke",textAlign:"justify"}}),Mr=function(e){var t=e.image,n=e.title,r=e.description,i=Object(fe.default)().width,a=Object(Vn.useNavigation)();return Object(oe.jsxs)(be.default,{style:[Dr.container,{width:i}],children:[Object(oe.jsx)(Rr.default,{source:t,style:Dr.image}),Object(oe.jsxs)(be.default,{style:Dr.texts,children:[Object(oe.jsx)(un.default,{style:Dr.title,children:n}),void 0!==r?Object(oe.jsx)(un.default,{style:Dr.description,children:r}):Object(oe.jsx)(he.default,{icon:"arrow-right-circle",iconColor:"whitesmoke",size:96,onPress:function(){_t.saveOnboardingCompleted().catch(console.error),a.replace("Home")}})]})]})},Er=ue.default.create({container:{flexDirection:"row",height:64},dot:{width:10,height:10,borderRadius:5,backgroundColor:"whitesmoke",marginHorizontal:5}}),Vr=function(e){var t=e.itemsCount,n=e.currentItemIdx;return Object(oe.jsx)(be.default,{style:Er.container,children:Array.from({length:t},(function(e,t){return Object(oe.jsx)(be.default,{style:[Er.dot,{opacity:t===n?1:.5}]},t)}))})};function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Br=ue.default.create({container:{flex:1,alignItems:"center"}}),Fr=function(){var e=function(){var e=Object(f.useTranslation)("screens",{keyPrefix:"onboarding"}).t;return[{image:H.onboarding.slide1,title:e("slide1.title"),description:e("slide1.description")},{image:H.onboarding.slide2,title:e("slide2.title"),description:e("slide2.description")},{image:H.onboarding.slide3,title:e("slide3.title"),description:e("slide3.description")},{image:H.onboarding.slide4,title:e("slide4.title"),description:e("slide4.description")},{image:H.onboarding.slide5,title:e("slide5.title"),description:e("slide5.description")},{image:H.onboarding.slide6,title:e("slide6.title")}]}(),t=a.a.useState(0),n=ln()(t,2),r=n[0],i=n[1],o=a.a.useCallback((function(e){i(e.viewableItems.length>0?e.viewableItems[0].index:null)}),[]);return Object(oe.jsxs)(be.default,{style:Br.container,children:[Object(oe.jsx)(rn.default,{data:e,renderItem:function(e){var t=e.item;return Object(oe.jsx)(Mr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){ce()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))},horizontal:!0,pagingEnabled:!0,bounces:!1,showsHorizontalScrollIndicator:!1,onViewableItemsChanged:o,viewabilityConfig:{viewAreaCoveragePercentThreshold:50}}),Object(oe.jsx)(Vr,{itemsCount:e.length,currentItemIdx:r})]})},zr=function(e){return Object(oe.jsx)(Fr,{})},Hr="android"===Se.default.OS?"keyboardDidShow":"keyboardWillShow",Ur="android"===Se.default.OS?"keyboardDidHide":"keyboardWillHide";var $r,Wr=n(261),Nr=ue.default.create({container:{flexDirection:"row",alignItems:"center"},progressBar:{width:64,marginHorizontal:8},label:{color:"rgba(245,245,245, .75)"}}),_r=function(e){var t=e.maxCharsCount,n=e.currentCharsCount,r=n/t;return Object(oe.jsxs)(be.default,{style:Nr.container,children:[Object(oe.jsx)(Wr.default,{progress:r,style:Nr.progressBar}),Object(oe.jsx)(me.default,{variant:"labelLarge",style:Nr.label,children:t-n})]})},Yr=mr.object().shape({text:mr.string().min(3).max(180).required("Required")}),Jr=ue.default.create({container:{position:"absolute",bottom:0,left:0,width:"100%",paddingHorizontal:4},textInput:{width:"100%",maxHeight:200},controlsContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:5}}),Zr=function(){var e=Object(f.useTranslation)("screens",{keyPrefix:"partialStory"}).t,t=Object(Vn.useNavigation)(),n=function(){var e=a.a.useState(!1),t=ln()(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=kn.default.addListener(Hr,(function(){return r(!0)})),t=kn.default.addListener(Ur,(function(){return r(!1)}));return function(){e.remove(),t.remove()}}),[]),n}();return Object(oe.jsx)(pr.Formik,{initialValues:{text:""},validationSchema:Yr,onSubmit:function(e,n){var r=e.text,i=at.lastSentence;return jt()(i),kn.default.dismiss(),Te(jn.create({text:r,parentSentenceId:i.id}),{successMessage:null,onSuccess:function(){n.resetForm(),t.navigate("ParticipationSuccess")},errorMessage:!0})},children:function(t){var r=t.handleSubmit,i=t.handleChange,a=t.handleBlur,o=t.isSubmitting,s=t.values,l=t.errors,c=t.touched;return Object(oe.jsxs)(be.default,{style:Jr.container,children:[Object(oe.jsx)(In.default,{style:Jr.textInput,mode:"outlined",placeholder:e("write"),multiline:!0,maxLength:180,value:s.text,onChangeText:i("text"),onBlur:a("text"),error:Boolean(l.text)&&c.text}),(n||!we||s.text.length>0)&&Object(oe.jsxs)(be.default,{style:Jr.controlsContainer,children:[Object(oe.jsx)(_r,{maxCharsCount:180,currentCharsCount:s.text.length}),Object(oe.jsx)(he.default,{icon:"send",disabled:o,onPress:function(){return r()}})]})]})}})},Gr=Object(ge.observer)((function(e){var t=e.navigation,n=Object(f.useTranslation)("screens",{keyPrefix:"partialStory"}).t,r=Object(br.default)();return Object(oe.jsx)(dr.default,{style:{flex:1},children:Object(oe.jsx)(fr.default,{style:{flex:1},behavior:"ios"===Se.default.OS?"padding":void 0,keyboardVerticalOffset:r,children:Object(oe.jsxs)(be.default,{style:{flex:1},children:[Object(oe.jsx)(Pn,{style:Kr.sentenceList,data:at.partialStory.result,onReport:function(){return t.navigate("ParticipationSuccess")},onMarkedCompleted:function(){return t.navigate("ParticipationSuccess")},ListHeaderComponent:Object(oe.jsx)(me.default,{variant:"labelMedium",style:Kr.listInfoHeader,children:n("listInfoHeader")})}),Object(oe.jsx)(Zr,{})]})})})})),Kr=ue.default.create({sentenceList:{paddingHorizontal:20},listInfoHeader:{textAlign:"center",marginVertical:20}}),Qr=Gr,Xr=ue.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"mediumseagreen"},title:{fontWeight:"bold",marginVertical:4,color:"whitesmoke"},buttonsContainer:{marginTop:64},button:{marginVertical:16,backgroundColor:"whitesmoke"},buttonText:{color:"mediumseagreen"}}),ei=function(e){var t=e.navigation,n=Object(f.useTranslation)("screens",{keyPrefix:"participationSuccess"}).t;return Object(oe.jsxs)(dr.default,{style:Xr.container,children:[Object(oe.jsx)(he.default,{icon:"check-circle-outline",iconColor:"whitesmoke",size:100}),Object(oe.jsx)(me.default,{variant:"headlineLarge",style:Xr.title,children:n("title")}),Object(oe.jsxs)(be.default,{style:Xr.buttonsContainer,children:[Object(oe.jsx)(Ln.default,{style:Xr.button,mode:"contained",onPress:function(){return t.navigate("PartialStory")},children:Object(oe.jsx)(me.default,{variant:"titleLarge",style:[Xr.buttonText,{fontWeight:"bold"}],children:n("partialStoryLink")})}),Object(oe.jsx)(Ln.default,{style:Xr.button,mode:"contained",onPress:function(){return t.navigate("Home")},children:Object(oe.jsx)(me.default,{variant:"titleMedium",style:Xr.buttonText,children:n("homeLink")})})]})]})},ti=Object(Ne.gql)($r||($r=We()(["\nquery GetStory ($storyId: Int!) {\n  public {\n    story(storyId: $storyId) {\n      id\n      sentences {\n        id\n        text\n        parentSentenceId\n        owner {\n          id\n          username\n        }\n        createdAt\n      }\n      createdAt\n    }\n  }\n}\n"])));function ni(e){return ri.apply(this,arguments)}function ri(){return(ri=E()((function*(e){return(yield G.query({query:ti,variables:e})).data.public.story}))).apply(this,arguments)}var ii=new(function(){function e(){ee()(this,e),this.story=new ze(ni,{catchUnhandled:console.error})}return ne()(e,[{key:"refresh",value:function(){var e=E()((function*(e){yield this.story.ensureSuccessReload({storyId:e})}));return function(t){return e.apply(this,arguments)}}()}]),e}()),ai=Object(ge.observer)((function(e){var t=e.route.params.storyId;Object(Vn.useFocusEffect)(a.a.useCallback((function(){Te(ii.refresh(t),{successMessage:null,errorMessage:!0})}),[t]));var n=Object(f.useTranslation)("screens",{keyPrefix:"storyViewer"}).t,r=ii.story.result;return Object(oe.jsx)(dr.default,{style:oi.container,children:Object(oe.jsx)(Pn,{data:null==r?void 0:r.sentences,disableControls:!0,style:oi.sentencesList,ListHeaderComponent:void 0!==(null==r?void 0:r.createdAt)?Object(oe.jsx)(me.default,{variant:"labelMedium",style:oi.dateHeader,children:n("completedTitle")+" "+Object(cn.default)(r.createdAt,n("dateFormat"))}):null})})})),oi=ue.default.create({container:{flex:1},sentencesList:{paddingHorizontal:20},dateHeader:{textAlign:"center",marginVertical:20}}),si=ai,li=ue.default.create({card:{marginBottom:20}}),ci=function(e){var t=e.story,n=t.id,r=t.title,i=t.createdAt,a=Object(f.useTranslation)("screens",{keyPrefix:"library"}).t,o=Object(Vn.useNavigation)();return Object(oe.jsx)($n.default,{style:li.card,onPress:function(){return o.navigate("StoryViewer",{storyId:n})},children:Object(oe.jsx)($n.default.Title,{title:r,titleVariant:"bodyLarge",subtitle:Object(cn.default)(i,a("misc.dateFormat")),subtitleVariant:"labelSmall"})})},ui=ue.default.create({container:{flex:1,alignItems:"center",paddingTop:50},image:{width:200,height:200,resizeMode:"contain"}}),di=function(){var e=Object(f.useTranslation)("screens",{keyPrefix:"library"}).t;return Object(oe.jsxs)(be.default,{style:ui.container,children:[Object(oe.jsx)(Rr.default,{source:H.misc.empty,style:ui.image}),Object(oe.jsx)(me.default,{variant:"titleLarge",children:e("emptyLibrary")})]})},fi=Object(ge.observer)((function(e){var t=Object(f.useTranslation)("screens",{keyPrefix:"library"}).t;return Object(oe.jsxs)(be.default,{style:bi.container,children:[Object(oe.jsx)(rn.default,{data:ft.stories.result,renderItem:function(e){var t=e.item;return Object(oe.jsx)(ci,{story:t})},keyExtractor:function(e){return e.id.toString()},refreshControl:Object(oe.jsx)(en.default,{refreshing:ft.stories.loading,onRefresh:function(){Te(ft.refresh(),{successMessage:null,errorMessage:!0})}}),ListHeaderComponent:Object(oe.jsx)(me.default,{variant:"labelLarge",style:bi.infoText,children:t("pageInfo",{sentencesCount:ft.mySentencesCount.lastResult})}),ListEmptyComponent:Object(oe.jsx)(di,{})}),Object(oe.jsx)(Bn,{})]})})),bi=ue.default.create({container:{flex:1,paddingHorizontal:10},infoText:{marginVertical:24}}),pi=fi,mi=Object(Ie.default)(),hi=Object(ge.observer)((function(){var e=Object(f.useTranslation)("common",{keyPrefix:"app"}).t;return Gt.loading?Object(oe.jsx)(Xt,{}):Object(oe.jsx)(Ce.default,{children:Object(oe.jsxs)(mi.Navigator,{initialRouteName:_t.onboardingCompleted?"Home":"Onboarding",screenOptions:{headerStyle:{backgroundColor:"#2b2b2b"},headerBackTitle:e("backTitle"),headerTitleStyle:{fontWeight:"bold",fontSize:20,color:"#fafafa"},contentStyle:{backgroundColor:"#2b2b2b"}},children:[Object(oe.jsx)(mi.Screen,{name:"Home",component:ur,options:{headerShown:!1},listeners:{focus:bt}}),Object(oe.jsx)(mi.Screen,{name:"Login",component:yr,options:{title:e("screens.login")}}),Object(oe.jsx)(mi.Screen,{name:"Register",component:Sr,options:{title:e("screens.register")}}),Object(oe.jsx)(mi.Screen,{name:"ForgotPassword",component:Ar,options:{title:e("screens.forgotPassword")}}),Object(oe.jsx)(mi.Screen,{name:"Onboarding",component:zr,options:{headerShown:!1}}),Object(oe.jsx)(mi.Screen,{name:"PartialStory",component:Qr,options:{title:e("screens.partialStory")},listeners:{focus:pt}}),Object(oe.jsx)(mi.Screen,{name:"ParticipationSuccess",component:ei,options:{headerShown:!1}}),Object(oe.jsx)(mi.Screen,{name:"StoryViewer",component:si,options:{title:e("screens.storyViewer")}}),Object(oe.jsx)(mi.Screen,{name:"Library",component:pi,options:{title:e("screens.library")},listeners:{focus:mt}})]})})}));Object(o.default)((function(){return Object(oe.jsx)(l.ApolloProvider,{client:G,children:Object(oe.jsx)(c.default,{theme:u.MD3DarkTheme,children:Object(oe.jsxs)(ke,{children:[Object(oe.jsx)(hi,{}),Object(oe.jsx)(se,{}),Object(oe.jsx)(s.StatusBar,{style:"auto"})]})})})}))}},[[352,1,2]]]);
//# sourceMappingURL=app.58927be5.chunk.js.map