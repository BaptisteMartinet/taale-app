(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{352:function(e,t,n){e.exports=n(419)},371:function(e,t,n){e.exports=n.p+"static/media/slide1.363002c1.png"},372:function(e,t,n){e.exports=n.p+"static/media/slide2.a9c23c2f.png"},373:function(e,t,n){e.exports=n.p+"static/media/slide3.f00edb54.png"},374:function(e,t,n){e.exports=n.p+"static/media/slide4.3ba82faf.png"},375:function(e,t,n){e.exports=n.p+"static/media/slide5.56af1504.png"},376:function(e,t,n){e.exports=n.p+"static/media/slide6.de1ae450.png"},377:function(e,t,n){e.exports=n.p+"static/media/treeBackground.3131d4f0.jpg"},378:function(e,t,n){e.exports=n.p+"static/media/void.3f06e14f.png"},419:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),o=n(456),s=n(338),l=n(455),c=n(264),u=n(243),d=n(31),f=n(217),b={fr:{form:{headlineTitle:"Rebonjour!",headlineDescription:"Connectez-vous \xe0 votre compte",email:"Email",password:"Mot de passe",submit:"Se connecter",forgotPassword:"Mot de passe oubli\xe9",register:"Je n'ai pas de compte"}},en:{form:{headlineTitle:"Welcome back!",headlineDescription:"Sign in to your account",email:"Email",password:"Password",submit:"Sign in",forgotPassword:"Forgot password",register:"I don't have an account"}}},p={fr:{form:{headlineTitle:"Bienvenue sur Taale",headlineDescription:"Cr\xe9er votre compte",username:"Nom d'utilisateur",usernameHelper:"Peut contenir lettres, chiffres et '_' (ex: John_Doe07)",email:"Email",password:"Mot de passe",submit:"Cr\xe9er mon compte",registerSuccess:"Compte cr\xe9\xe9 avec succ\xe8s"}},en:{form:{headlineTitle:"Welcome to Taale!",headlineDescription:"Create an account",username:"Username",usernameHelper:"Can contain letters, numbers and '_' (ex: John_Doe07)",email:"Email",password:"Password",submit:"Sign Up",registerSuccess:"Account successfully created"}}},m={fr:{forgotPasswordForm:{title:"R\xe9initialisez votre mot de passe",subtitle:"Vous allez recevoir un code de validation par email.",emailLabel:"Email",submit:"Envoyer le code"},resetPasswordForm:{title:"R\xe9initialisez votre mot de passe",subtitle:"Veuillez renseigner un nouveau mot de passe.",newPasswordLabel:"Nouveau mot de passe",validationCodeLabel:"Code",submit:"Sauvegarder"}},en:{forgotPasswordForm:{title:"Reset your password",subtitle:"You'll receive a validation code by email.",emailLabel:"Email",submit:"Send verification code"},resetPasswordForm:{title:"Reset your password",subtitle:"Set your new password.",newPasswordLabel:"New password",validationCodeLabel:"Code",submit:"Save"}}},h={fr:{slide1:{title:"Bienvenue sur Taale",description:"Taale est une application d'\xe9criture collaborative ou les utilisateurs participent \xe0 l'\xe9laboration d'une immense fable comportant une infinit\xe9 d'univers paral\xe8lles."},slide2:{title:"L'arbre",description:'On peux representer la Fable comme un gigantesque arbre invers\xe9. La base sera toujours la phrase "Il \xe9tait une fois, " puis les utilisateurs construisent les branches au fil des paragraphes qu\'ils \xe9crivent.'},slide3:{title:"Un cadre limit\xe9",description:"Pour pimenter la chose, les utilisateurs sont plac\xe9s al\xe9atoirement sur une branche et ne peuvent voir que quelques paragraphes au dessus d'eux. Le but \xe9tant de continuer l'histoire tout en gardant son sens."},slide4:{title:"Deviens Taaler",description:"\xc0 chaque fois tu \xe9crit un nouveau paragraphe, tu d\xe9bloque un univers des possibles. Tu te retrouvera certainement dans une des histoires publi\xe9es quotidiennement sur la page d'accueil."},slide5:{title:"Vote !",description:"Si tu pense qu'une certaine phrase termine l'histoire, clique dessus pour voter la fin de la branche. Au contraire, si une phrase ne fait aucun sens ou comporte du contenu injurieux, tu peux la signaler."},slide6:{title:"\xc0 toi de jouer"}},en:{slide1:{title:"Welcome to Taale",description:"Taale is a collaborative writing application where users participate in the development of a massive fable containing an infinite number of parallel universes."},slide2:{title:"The tree",description:"We can represent the Fable as a gigantic inverted tree. The base will always be the sentence 'Once upon a time, ' and then the users will build the branches as they write paragraphs."},slide3:{title:"Limited scope",description:"To add some spice, users are randomly placed on a branch and can only see a few paragraphs above them. The goal is to continue the story while keeping its meaning intact."},slide4:{title:"Become a Taaler",description:"Every time you write a new paragraph, you unlock a universe of possibilities. You may find yourself in one of the stories featured daily on the homepage."},slide5:{title:"Vote!",description:"If you think that a certain sentence ends the story, click on it to vote for the end of the branch. On the contrary, if a phrase doesn't make any sense or contains offensive content, you can report it."},slide6:{title:"Your turn to play"}}},g={fr:{hero:{hello:"Bonjour,",guest:"Invit\xe9"},statistics:{title:"Taale en chiffres",stats:{users:"Utilisateurs",trees:"Arbres (Langues support\xe9es)",stories:"Branches (Histoires cr\xe9es)",sentences:"Feuilles (Paragraphes \xe9crits)"},nullValue:"N/A"},dailyStory:{title:"L'histoire du jour",subtitle:"Une nouvelle histoire tous les jours \xe0 minuit",error:"Une erreur est survenue"},myLibrary:{title:"Biblioth\xe8que",subtitle:"Retrouve toutes tes histoires"},settingsSheet:{title:"Param\xe8tres",actions:"Actions",about:"\xc0 propos",support:"Support",logout:"Se d\xe9connecter",logoutSuccess:"D\xe9connect\xe9 avec succ\xe8s",dangerZone:"Zone de danger",deleteAccount:"Supprimer mon compte",accountDeletionAlert:{title:"Suppression de compte",description:"Cette action est irr\xe9versible et entrainera la suppression de toutes vos donn\xe9es.",cancel:"Retour",submit:"Supprimer"},accountDeletionSuccess:"Compte supprim\xe9 avec succ\xe8s"}},en:{hero:{hello:"Hello,",guest:"Guest"},statistics:{title:"Statistics",stats:{users:"Users",trees:"Trees (Supported languages)",stories:"Branches (Stories)",sentences:"Leafs (Written paragraphs)"},nullValue:"N/A"},dailyStory:{title:"Today's story",subtitle:"A new story every day at midnight",error:"Something went wrong"},myLibrary:{title:"Library",subtitle:"Find all your stories"},settingsSheet:{title:"Settings",actions:"Actions",about:"About",support:"Support",logout:"Logout",logoutSuccess:"Successfully logged out",dangerZone:"Danger zone",deleteAccount:"Delete my account",accountDeletionAlert:{title:"Account deletion",description:"This action is irreversible and will delete all your datas from the application.",cancel:"Cancel",submit:"Delete"},accountDeletionSuccess:"Account successfully deleted"}}},y={fr:{listInfoHeader:"Vous avez \xe9t\xe9 plac\xe9 al\xe9atoirement sur une branche",write:"\xc9crire"},en:{listInfoHeader:"You've been randomly placed on a branch",write:"Write"}},j={fr:{title:"Enregistr\xe9 avec succ\xe8s",partialStoryLink:"C'est reparti",homeLink:"Accueil"},en:{title:"Successfully saved",partialStoryLink:"Let's do it again",homeLink:"Home"}},O={fr:{pageInfo:"Vous trouverez ici toutes les histoires auxquelles vous avez particip\xe9.\nVous comptabilisez {{sentencesCount}} participation(s).",emptyLibrary:"Wow, tellement vide",misc:{dateFormat:"dd/MM/yyyy HH:mm"}},en:{pageInfo:"You'll find here every story you've participated in.\nYou've participated {{sentencesCount}} time(s).",emptyLibrary:"Wow, such empty",misc:{dateFormat:"dd/MM/yyyy hh:mm aaa"}}},v={fr:{completedTitle:"Compl\xe9t\xe9e le",dateFormat:"dd/MM/yy '\xe0' HH:mm"},en:{completedTitle:"Completed the",dateFormat:"dd/MM/yy 'at' hh:mm aaa"}},x={fr:{login:b.fr,register:p.fr,onboarding:h.fr,home:g.fr,partialStory:y.fr,participationSuccess:j.fr,library:O.fr,storyViewer:v.fr,forgotPassword:m.fr},en:{login:b.en,register:p.en,onboarding:h.en,home:g.en,partialStory:y.en,participationSuccess:j.en,library:O.en,storyViewer:v.en,forgotPassword:m.en}},S={fr:{close:"Fermer"},en:{close:"Close"}},w={fr:{backTitle:"Retour",screens:{login:"Se connecter",register:"Cr\xe9er un compte",forgotPassword:"Mot de passe oubli\xe9",partialStory:"Participer",storyViewer:"Lecteur",library:"Biblioth\xe8que"}},en:{backTitle:"Back",screens:{login:"Login",register:"Register",forgotPassword:"Forgot password",partialStory:"Participate",storyViewer:"Reader",library:"Library"}}},P={fr:{report:"Signaler",reportSuccessfull:"Signal\xe9 avec succ\xe8s",markCompleted:"Voter pour terminer",markCompletedSuccessfull:"Vote pris en compte",deletedUser:"Inconnu",misc:{dateFormat:"dd/MM/yy HH:mm"}},en:{report:"Report",reportSuccessfull:"Successfully reported",markCompleted:"Mark completed",markCompletedSuccessfull:"Vote registered",deletedUser:"Unknown",misc:{dateFormat:"dd/MM/yy hh:mm aaa"}}},k={fr:{title:"Rendez-vous sur votre boite mail",subTitle:"Nous vous avons envoy\xe9 un code de v\xe9rification par email.",resendCode:"Renvoyer le code"},en:{title:"Check your email",subTitle:"We've sent you a verification code by email.",resendCode:"Resend code"}},C={fr:{participate:"Participer"},en:{participate:"Participate"}},I={fr:{snackbar:S.fr,app:w.fr,sentencesList:P.fr,codeValidationModal:k.fr,participationFab:C.fr},en:{snackbar:S.en,app:w.en,sentencesList:P.en,codeValidationModal:k.en,participationFab:C.en}},L={fr:{_Default:"Une erreur est survenue",InvalidLoginOrPassword:"Nom d'utilisateur ou mot de passe invalide",InvalidEmailFormat:"Format d'email invalide",EmailTaken:"Adresse email d\xe9j\xe0 utilis\xe9e",InvalidValidationCode:"Code de v\xe9rification invalide",InvalidUsernameLength:"Nom d'utilisateur trop court/long",InvalidUsernameChar:"Le nom d'utilisateur contient un caract\xe8re invalide",UsernameTaken:"Nom d'utilisateur d\xe9j\xe0 utilis\xe9",InvalidSentenceLength:"Taille de paragraphe invalide",ResourceNotFound:"Resource non trouv\xe9e",SpamDetected:"Spam d\xe9tect\xe9",InsufficientPermission:"Permissions insufisantes",InvalidArgument:"Argument invalide",SentenceAlreadyPartOfStory:"Le paragraphe fait d\xe9j\xe0 parti d'une histoire",SentenceAlreadyReported:"Paragraphe d\xe9j\xe0 signal\xe9",SentenceAlreadyMarkedComplete:"Paragraphe d\xe9j\xe0 vot\xe9 comme point de terminaison"},en:{_Default:"An error has occured",InvalidLoginOrPassword:"Invalid login or password",InvalidEmailFormat:"Invalid email format",EmailTaken:"Email already taken",InvalidValidationCode:"Invalid verification code",InvalidUsernameLength:"Username too short/long",InvalidUsernameChar:"Username contains an invalid character",UsernameTaken:"Username already taken",InvalidSentenceLength:"Invalid sentence length",ResourceNotFound:"Resource not found",SpamDetected:"Spam detected",InsufficientPermission:"Insufficient permission",InvalidArgument:"Invalid argument",SentenceAlreadyPartOfStory:"Sentence already part of a story",SentenceAlreadyReported:"Sentence already reported",SentenceAlreadyMarkedComplete:"Sentence already voted as termination point"}},T={fr:{common:I.fr,screens:x.fr,errors:L.fr},en:{common:I.en,screens:x.en,errors:L.en}},A={en:T.en,fr:T.fr};u.default.use(d.initReactI18next).init({resources:A,lng:null==(r=Object(f.getLocales)().at(0))?void 0:r.languageCode,fallbackLng:"en",interpolation:{escapeValue:!1}});var R=u.default,D=n(21),M=n.n(D),V=n(275),E=n(457),q=n(460),B=n(280),F=new RegExp("^\\w{2,24}$"),H={onboarding:{slide1:n(371),slide2:n(372),slide3:n(373),slide4:n(374),slide5:n(375),slide6:n(376)},home:{treeBackground:n(377)},misc:{empty:n(378)}},z=n(226),U=n(181),$=new Set;function W(){return(W=M()((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.secure;return r&&(yield U.isAvailableAsync())?($.add(e),U.setItemAsync(e,t)):z.default.setItem(e,t)}))).apply(this,arguments)}var N={setItem:function(e,t){return W.apply(this,arguments)},getItem:function(e){return $.has(e)?U.getItemAsync(e):z.default.getItem(e)},deleteItem:function(e){return $.has(e)?U.deleteItemAsync(e):z.default.removeItem(e)}},_=Object(V.createHttpLink)({uri:"https://taale-api.herokuapp.com/"}),Y=Object(B.setContext)(function(){var e=M()((function*(e,t){var n,r=t.headers;void 0===r&&(r={});var i=yield N.getItem("auth_token"),a=null==(n=Object(f.getLocales)().at(0))?void 0:n.languageCode;return null!==i&&(r.authorization="Bearer "+i),a&&(r["content-language"]=a),{headers:r}}));return function(t,n){return e.apply(this,arguments)}}()),J=new E.ApolloClient({name:"taale-app",version:"1.0",link:Y.concat(_),cache:new q.InMemoryCache({typePolicies:{PublicQuery:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},AuthenticatedQuery:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},PublicMutation:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}},AuthenticatedMutation:{merge:function(e,t,n){return(0,n.mergeObjects)(e,t)}}}})}),Z=n(74),G=n(266),K=n(10),Q=n.n(K),X=n(11),ee=n.n(X),te=n(19),ne=new Map([["short",1e3],["long",3e3],["long",5e3]]),re=new(function(){function e(){Q()(this,e),this.visible=!1,this.msg="",this.duration=3e3,Object(te.makeObservable)(this,{visible:te.observable,msg:te.observable,duration:te.observable,display:te.action,dismiss:te.action})}return ee()(e,[{key:"display",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.msg=e;var r=n.duration;r?this.duration=null!=(t=ne.get(r))?t:3e3:3e3!=this.duration&&(this.duration=3e3),this.visible=!0}},{key:"dismiss",value:function(){this.visible=!1}}]),e}()),ie=n(3),ae=Object(Z.observer)((function(){var e=Object(d.useTranslation)("common",{keyPrefix:"snackbar"}).t;return Object(ie.jsx)(G.default,{visible:re.visible,onDismiss:function(){re.dismiss()},duration:re.duration,action:{label:e("close"),onPress:function(){re.dismiss()}},children:re.msg})})),oe=n(4),se=n.n(oe),le=n(1),ce=n(5),ue=n(124),de=n(2),fe=n(81),be=n(25),pe=n(72),me=n(61);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=Object(me.observer)((function(e){var t=e.open,n=e.onClose,r=e.animationDuration,i=e.title,o=e.scrollViewProps,s=e.children,l=.75*Object(ue.default)().height,c=a.a.useRef(new ce.default.Value(l)).current,u=a.a.useRef(ce.default.timing(c,{toValue:0,duration:r,useNativeDriver:!0})).current,d=a.a.useRef(ce.default.timing(c,{toValue:l,duration:r,useNativeDriver:!0})).current;return a.a.useEffect((function(){t?u.start():d.start()}),[t]),Object(ie.jsxs)(ce.default.View,{style:[je.container,{height:l,transform:[{translateY:c}]}],children:[Object(ie.jsxs)(de.default,{style:je.header,children:[Object(ie.jsx)(be.default,{variant:"titleLarge",style:je.title,children:i}),Object(ie.jsx)(pe.default,{icon:"close",size:32,style:je.closeBtn,onPress:n})]}),Object(ie.jsx)(fe.default,ge(ge({},o),{},{children:s}))]})})),je=le.default.create({container:{position:"absolute",bottom:0,left:0,width:"100%",backgroundColor:"#1a1a1d",borderRadius:16,overflow:"hidden"},header:{width:"100%",backgroundColor:"#110f15",paddingVertical:16},title:{textAlign:"center",color:"whitesmoke"},closeBtn:{position:"absolute",color:"whitesmoke",top:2,right:2}}),Oe=ye,ve=n(12),xe="android"===ve.default.OS||"ios"===ve.default.OS,Se=(ve.default.OS,"macos"===ve.default.OS||ve.default.OS,le.default.create({container:{flex:1,backgroundColor:"red"},appWrapper:{width:360,height:"auto",aspectRatio:6/13,margin:"auto",overflow:"hidden",borderRadius:32}})),we=function(e){var t=e.children;return xe?Object(ie.jsx)(i.Fragment,{children:t}):Object(ie.jsx)(de.default,{style:Se.container,children:Object(ie.jsx)(de.default,{style:Se.appWrapper,children:t})})},Pe=n(454),ke=n(453),Ce=n(132);function Ie(e,t){var n=t.onSuccess,r=t.successMessage,i=t.onError,a=t.errorMessage;return e.then((function(e){return n&&n(e),r&&re.display(r),e})).catch((function(e){var t;if(i&&i(e),a){switch(typeof a){case"string":return re.display(a,{duration:"long"});case"boolean":if(!Object(Ce.isApolloError)(e))break;var n=null==(t=e.graphQLErrors.at(0))?void 0:t.extensions.code;if("string"!==typeof n)break;return re.display(R.t([n,"_Default"],{ns:"errors"}),{duration:"long"})}re.display(R.t("_Default",{ns:"errors"}),{duration:"long"})}}))}var Le=n(20),Te=n.n(Le),Ae=n(22),Re=n.n(Ae),De=n(13),Me=n.n(De);function Ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me()(e);if(t){var i=Me()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Re()(this,n)}}var Ee,qe,Be=function(e){Te()(n,e);var t=Ve(n);function n(e,r){var i;return Q()(this,n),(i=t.call(this)).fetch=e,i.opts=r,i}return ee()(n,[{key:"ensureSuccess",value:function(){return"fulfilled"===this.status?this.result:this.ensureSuccessReload.apply(this,arguments)}},{key:"ensureSuccessReload",value:function(){var e=this.fetch.apply(this,arguments);return this.track(e,this.opts),e}}]),n}(function(){function e(){Q()(this,e),this.lastResult=void 0,this.lastError=void 0,this.status=void 0,this.currentPromise=null,Object(te.makeObservable)(this,{lastResult:te.observable,lastError:te.observable,status:te.observable,setResult:te.action,setError:te.action,reset:te.action,track:te.action,result:te.computed,error:te.computed,tracking:te.computed,loading:te.computed,finished:te.computed})}return ee()(e,[{key:"setResult",value:function(e){this.lastResult=e,this.lastError=void 0,this.status="fulfilled"}},{key:"setError",value:function(e){this.lastError=e,this.lastResult=void 0,this.status="rejected"}},{key:"reset",value:function(){this.lastResult=void 0,this.lastError=void 0,this.status=void 0,this.currentPromise=null}},{key:"result",get:function(){if("pending"!==this.status)return this.lastResult}},{key:"error",get:function(){if("pending"!==this.status)return this.lastError}},{key:"tracking",get:function(){return void 0!==this.status}},{key:"loading",get:function(){return"pending"===this.status}},{key:"finished",get:function(){return"fulfilled"===this.status||"rejected"===this.status}},{key:"track",value:function(e,t){var n=this,r=t.thenUnhandled,i=t.thenDropped,a=t.catchUnhandled,o=t.catchDropped,s=t.finallyUnhandled,l=t.finallyDropped;this.currentPromise=e,this.status="pending",e.then((function(t){e===n.currentPromise?(n.setResult(t),null==r||r(t)):null==i||i(t)})).catch((function(t){e===n.currentPromise?(n.setError(t),null==a||a(t)):null==o||o(t)})).finally((function(){e==n.currentPromise?null==s||s():null==l||l()}))}}]),e}()),Fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Q()(this,e),this.isOpen=t,Object(te.makeObservable)(this,{isOpen:te.observable,open:te.action.bound,close:te.action.bound,toggle:te.action.bound})}return ee()(e,[{key:"open",value:function(){this.isOpen=!0}},{key:"close",value:function(){this.isOpen=!1}},{key:"toggle",value:function(){this.isOpen=!this.isOpen}}]),e}(),He=function(){function e(){Q()(this,e),this.loading=!1,Object(te.makeObservable)(this,{loading:te.observable,setLoading:te.action,setLoaded:te.action})}return ee()(e,[{key:"setLoading",value:function(){this.loading=!0}},{key:"setLoaded",value:function(){this.loading=!1}}]),e}(),ze=n(39),Ue=n.n(ze),$e=n(448),We=Object($e.gql)(Ee||(Ee=Ue()(["\nquery DailyStory {\n  public {\n    dailyStory {\n      id\n      createdAt\n    }\n  }\n}\n"])));function Ne(){return _e.apply(this,arguments)}function _e(){return(_e=M()((function*(){return(yield J.query({query:We})).data.public.dailyStory}))).apply(this,arguments)}var Ye=Object($e.gql)(qe||(qe=Ue()(["\nquery GetStatistics {\n  public {\n    statistics {\n      users\n      openTrees\n      stories\n      sentences\n    }\n  }\n}\n"])));function Je(){return Ze.apply(this,arguments)}function Ze(){return(Ze=M()((function*(){return(yield J.query({query:Ye,fetchPolicy:"no-cache"})).data.public.statistics}))).apply(this,arguments)}var Ge,Ke=new(function(){function e(){Q()(this,e),this.dailyStory=new Be(Ne,{catchUnhandled:console.error}),this.statistics=new Be(Je,{catchUnhandled:console.error}),this.settingsOpenState=new Fe}return ee()(e,[{key:"pullRefresh",value:function(){return Promise.all([this.dailyStory.ensureSuccessReload(),this.statistics.ensureSuccessReload()])}},{key:"refresh",value:function(){return Promise.all([this.dailyStory.ensureSuccess(),this.statistics.ensureSuccess()])}}]),e}()),Qe=Object($e.gql)(Ge||(Ge=Ue()(["\nquery PartialStory {\n  authenticated {\n    partialStory {\n      id\n      text\n      parentSentenceId\n      owner {\n        id\n        username\n      }\n      createdAt\n      updatedAt\n    }\n  }\n}\n"])));function Xe(){return et.apply(this,arguments)}function et(){return(et=M()((function*(){return(yield J.query({query:Qe,fetchPolicy:"no-cache"})).data.authenticated.partialStory}))).apply(this,arguments)}var tt,nt,rt=new(function(){function e(){Q()(this,e),this.partialStory=new Be(Xe,{catchUnhandled:console.error}),Object(te.makeObservable)(this,{lastSentence:te.computed})}return ee()(e,[{key:"lastSentence",get:function(){var e;return null==(e=this.partialStory.result)?void 0:e.at(-1)}},{key:"refresh",value:function(){return this.partialStory.ensureSuccessReload()}}]),e}()),it=Object($e.gql)(tt||(tt=Ue()(["\nquery MyStories {\n  authenticated {\n    myStories {\n      id\n      title\n      createdAt\n    }\n  }\n}\n"])));function at(){return ot.apply(this,arguments)}function ot(){return(ot=M()((function*(){return(yield J.query({query:it})).data.authenticated.myStories}))).apply(this,arguments)}var st=Object($e.gql)(nt||(nt=Ue()(["\nquery Statistics {\n  authenticated {\n    statistics {\n      mySentences\n    }\n  }\n}\n"])));function lt(){return ct.apply(this,arguments)}function ct(){return(ct=M()((function*(){return(yield J.query({query:st})).data.authenticated.statistics.mySentences}))).apply(this,arguments)}var ut=new(function(){function e(){Q()(this,e),this.stories=new Be(at,{catchUnhandled:console.error}),this.mySentencesCount=new Be(lt,{catchUnhandled:console.error})}return ee()(e,[{key:"refresh",value:function(){var e=M()((function*(){yield this.stories.ensureSuccessReload(),yield this.mySentencesCount.ensureSuccessReload()}));return function(){return e.apply(this,arguments)}}()}]),e}());function dt(){Ie(Ke.refresh(),{successMessage:null,errorMessage:!0})}function ft(){Ie(rt.refresh(),{successMessage:null,errorMessage:!0})}function bt(){Ie(ut.refresh(),{successMessage:null,errorMessage:!0})}var pt,mt,ht=n(106),gt=n.n(ht),yt=Object($e.gql)(pt||(pt=Ue()(["\nmutation Login($email: String!, $password: String!) {\n  public {\n    account {\n      login(email: $email, password: $password) {\n        user {\n          id\n          username\n          email\n          role\n          createdAt\n          updatedAt\n        }\n        token\n      }\n    }\n  }\n}\n"])));var jt,Ot=Object($e.gql)(mt||(mt=Ue()(["\nmutation Register($username: String!, $email: String!, $password: String!, $emailValidationCode: String!) {\n  public {\n    account {\n      register(username: $username, email: $email, password: $password, emailValidationCode: $emailValidationCode)\n    }\n  }\n}\n"])));function vt(e){return J.mutate({mutation:Ot,variables:e})}var xt,St=Object($e.gql)(jt||(jt=Ue()(["\nquery Account {\n  authenticated {\n    account {\n      id\n      username\n      email\n      role\n      createdAt\n      updatedAt\n    }\n  }\n}\n"])));function wt(){return(wt=M()((function*(){return(yield J.query({query:St})).data.authenticated.account}))).apply(this,arguments)}var Pt,kt=Object($e.gql)(xt||(xt=Ue()(["\nquery UsernameAvailability($username: String!) {\n  public {\n    account {\n      usernameAvailability(username: $username)\n    }\n  }\n}\n"])));function Ct(e){return It.apply(this,arguments)}function It(){return(It=M()((function*(e){return(yield J.query({query:kt,variables:e})).data.public.account.usernameAvailability}))).apply(this,arguments)}var Lt,Tt=Object($e.gql)(Pt||(Pt=Ue()(["\nmutation VerifyEmail($email: String!) {\n  public {\n    account {\n      verifyEmail(email: $email)\n    }\n  }\n}\n"])));function At(e){return J.mutate({mutation:Tt,variables:e})}var Rt,Dt=Object($e.gql)(Lt||(Lt=Ue()(["\nmutation($email: String!) {\n  public {\n    account {\n      resendEmailVerificationCode(email: $email)\n    }\n  }\n}\n"])));function Mt(e){return J.mutate({mutation:Dt,variables:e})}var Vt,Et=Object($e.gql)(Rt||(Rt=Ue()(["\nmutation DeleteAccount {\n  authenticated {\n    account {\n      deleteAccount\n    }\n  }\n}\n"])));var qt,Bt=Object($e.gql)(Vt||(Vt=Ue()(["\nmutation ForgotPassword($email: String!) {\n  public {\n    account {\n      forgotPassword(email: $email)\n    }\n  }\n}\n"])));function Ft(e){return J.mutate({mutation:Bt,variables:e})}var Ht=Object($e.gql)(qt||(qt=Ue()(["\nmutation ResetPassword(\n  $email: String!\n  $newPassword: String!\n  $validationCode: String!\n) {\n  public {\n    account {\n      resetPassword(\n        email: $email\n        newPassword: $newPassword\n        validationCode: $validationCode\n      )\n    }\n  }\n}\n"])));function zt(e){return J.mutate({mutation:Ht,variables:e})}var Ut=new(function(){function e(){Q()(this,e),this.user=null,this.register=vt,this.usernameAvailability=Ct,this.verifyEmail=At,this.resendEmailVerificationCode=Mt,this.forgotPassword=Ft,this.resetPassword=zt,Object(te.makeObservable)(this,{user:te.observable,setUser:te.action,loggedIn:te.computed,loggedOut:te.computed})}return ee()(e,[{key:"setUser",value:function(e){this.user=e}},{key:"loggedIn",get:function(){return null!==this.user}},{key:"loggedOut",get:function(){return null===this.user}},{key:"login",value:function(){var e=M()((function*(e){var t=(yield function(e){return J.mutate({mutation:yt,variables:e})}(e)).data;gt()(t);var n=t.public.account.login,r=n.user,i=n.token;this.setUser(r),yield N.setItem("auth_token",i,{secure:!0})}));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=M()((function*(){yield N.deleteItem("auth_token"),this.setUser(null)}));return function(){return e.apply(this,arguments)}}()},{key:"refreshAccount",value:function(){var e=M()((function*(){if(null!==(yield N.getItem("auth_token"))){var e=yield function(){return wt.apply(this,arguments)}();this.setUser(e)}}));return function(){return e.apply(this,arguments)}}()},{key:"deleteAccount",value:function(){var e=M()((function*(){yield J.mutate({mutation:Et}),yield this.logout()}));return function(){return e.apply(this,arguments)}}()}]),e}()),$t=function(){function e(){Q()(this,e),this.onboardingCompleted=null,Object(te.makeObservable)(this,{onboardingCompleted:te.observable,setOnboardingCompleted:te.action})}return ee()(e,[{key:"setOnboardingCompleted",value:function(e){this.onboardingCompleted=e}},{key:"saveOnboardingCompleted",value:function(){return N.setItem(e.OnboardingStorageKey,"completed")}},{key:"refresh",value:function(){var t=M()((function*(){var t=yield N.getItem(e.OnboardingStorageKey);this.setOnboardingCompleted(null!==t||!xe)}));return function(){return t.apply(this,arguments)}}()}]),e}();$t.OnboardingStorageKey="onboaring";var Wt=new $t;function Nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me()(e);if(t){var i=Me()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Re()(this,n)}}var _t,Yt,Jt=new(function(e){Te()(n,e);var t=Nt(n);function n(){var e;return Q()(this,n),(e=t.call(this)).refresh().catch(console.warn),e}return ee()(n,[{key:"refresh",value:function(){var e=M()((function*(){this.setLoading(),yield Promise.allSettled([Wt.refresh(),Ut.refreshAccount(),Ke.refresh()]),this.setLoaded()}));return function(){return e.apply(this,arguments)}}()}]),n}(He)),Zt=n(309),Gt=le.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#2b2b2b"}}),Kt=function(){return Object(ie.jsx)(de.default,{style:Gt.container,children:Object(ie.jsx)(Zt.default,{size:"large"})})},Qt=n(150),Xt=n(8),en=n.n(Xt),tn=n(128),nn=n(121),rn=n(188),an=n(16),on=n.n(an),sn=n(461),ln=n(53),cn=n(166),un=Object($e.gql)(_t||(_t=Ue()(["\nmutation($sentenceId: Int) {\n  authenticated {\n    sentence(id: $sentenceId) {\n      report\n    }\n  }\n}\n"])));function dn(e){return J.mutate({mutation:un,variables:e})}var fn,bn=Object($e.gql)(Yt||(Yt=Ue()(["\nmutation Sentence($sentenceId: Int) {\n  authenticated {\n    sentence(id: $sentenceId) {\n      markCompleted\n    }\n  }\n}\n"])));function pn(e){return J.mutate({mutation:bn,variables:e})}var mn=Object($e.gql)(fn||(fn=Ue()(["\nmutation CreateSentence($parentSentenceId: Int!, $text: String!) {\n  authenticated {\n    sentence {\n      create(parentSentenceId: $parentSentenceId, text: $text) {\n        id\n      }\n    }\n  }\n}\n"])));function hn(e){return J.mutate({mutation:mn,variables:e})}var gn=new(ee()((function e(){Q()(this,e),this.report=dn,this.markCompleted=pn,this.create=hn}))),yn=le.default.create({text:{fontSize:16,color:"#fafafa",lineHeight:32},userTitle:{fontSize:12,fontWeight:"bold"}}),jn=function(e){var t,n,r=e.sentence,i=e.disableControls,o=e.onReport,s=e.onMarkedCompleted,l=Object(d.useTranslation)("common",{keyPrefix:"sentencesList"}).t,c=a.a.useState(!1),u=on()(c,2),f=u[0],b=u[1];return Object(ie.jsxs)(cn.default,{visible:f,onDismiss:function(){return b(!1)},anchor:Object(ie.jsx)(ln.default,{style:[yn.text,{fontWeight:Ut.user&&(null==(t=r.owner)?void 0:t.id)===Ut.user.id?"bold":void 0}],onPress:function(){return b(!0)},children:r.text}),anchorPosition:"bottom",children:[Object(ie.jsx)(cn.default.Item,{titleStyle:yn.userTitle,title:((null==(n=r.owner)?void 0:n.username)||l("deletedUser"))+" - "+Object(sn.default)(r.createdAt,l("misc.dateFormat"))}),Object(ie.jsx)(rn.default,{}),Object(ie.jsx)(cn.default.Item,{title:l("report"),leadingIcon:"alert",disabled:i||null===r.parentSentenceId,onPress:function(){Ie(gn.report({sentenceId:r.id}),{successMessage:l("reportSuccessfull"),onSuccess:function(){b(!1),null==o||o(r)},errorMessage:!0})}}),Object(ie.jsx)(cn.default.Item,{title:l("markCompleted"),leadingIcon:"check-circle",disabled:i||null===r.parentSentenceId,onPress:function(){Ie(gn.markCompleted({sentenceId:r.id}),{successMessage:l("markCompletedSuccessfull"),onSuccess:function(){b(!1),null==s||s(r)},errorMessage:!0})}})]})},On=["disableControls","onReport","onMarkedCompleted"];function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sn=function(e){var t=e.disableControls,n=e.onReport,r=e.onMarkedCompleted,i=en()(e,On);return Object(ie.jsx)(tn.default,xn(xn({},i),{},{renderItem:function(e){var i=e.item;return Object(ie.jsx)(jn,{sentence:i,disableControls:t,onReport:n,onMarkedCompleted:r})},keyExtractor:function(e){return e.id.toString()},ListEmptyComponent:nn.default,ItemSeparatorComponent:function(){return Object(ie.jsx)(rn.default,{bold:!0,style:{width:"8%",backgroundColor:"mediumaquamarine"}})}}))},wn=n(51),Pn=n(189),kn=n(263),Cn=n(122),In=["codeLength","onCodeChange","onCodeCompleted","onResendCode"];function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var An=le.default.create({container:{margin:20,backgroundColor:"#404040",padding:20,borderRadius:20,borderWidth:4,borderColor:"#333333"},title:{fontWeight:"bold",marginVertical:10},subtitle:{marginBottom:20},codeInput:{fontSize:32,height:64,textAlign:"center"},resendCodeBtn:{marginTop:25}}),Rn=function(e){var t=e.codeLength,n=e.onCodeChange,r=e.onCodeCompleted,i=e.onResendCode,o=en()(e,In),s=Object(d.useTranslation)("common",{keyPrefix:"codeValidationModal"}).t,l=a.a.useState(!1),c=on()(l,2),u=c[0],f=c[1],b=a.a.useMemo((function(){return"".padStart(t,"-")}),[t]);return Object(ie.jsxs)(Pn.default,Tn(Tn({},o),{},{dismissable:!1,contentContainerStyle:An.container,children:[Object(ie.jsx)(be.default,{variant:"titleLarge",style:An.title,children:s("title")}),Object(ie.jsx)(be.default,{variant:"titleSmall",style:An.subtitle,children:s("subTitle")}),Object(ie.jsx)(kn.default,{mode:"outlined",textAlign:"center",placeholder:b,style:An.codeInput,textContentType:"oneTimeCode",keyboardType:"number-pad",maxLength:t,onChangeText:function(e){null==n||n(e),e.length>=t&&(wn.default.dismiss(),r(e))}}),Object(ie.jsx)(Cn.default,{icon:"reload",style:An.resendCodeBtn,onPress:function(){f(!0),setTimeout((function(){f(!1)}),3e4),i()},disabled:u,children:s("resendCode")})]}))},Dn=n(265),Mn=n(69),Vn=le.default.create({fab:{position:"absolute",right:40,bottom:50}}),En=function(){var e=Object(Mn.useNavigation)(),t=Object(d.useTranslation)("common",{keyPrefix:"participationFab"}).t;return Object(ie.jsx)(Dn.default,{icon:"pencil-plus",label:t("participate"),style:Vn.fab,onPress:function(){null!==Ut.user?e.navigate("PartialStory"):e.navigate("Login")}})},qn=n(319),Bn=Object(me.observer)((function(){var e,t,n=Object(d.useTranslation)("screens",{keyPrefix:"home.hero"}).t;return Object(ie.jsx)(qn.default,{source:H.home.treeBackground,resizeMode:"cover",style:Fn.container,children:Object(ie.jsxs)(de.default,{style:Fn.textOverlay,children:[Object(ie.jsx)(be.default,{variant:"titleLarge",children:n("hello")}),Object(ie.jsx)(be.default,{variant:"headlineLarge",style:{fontWeight:"bold"},children:(null!=(e=null==(t=Ut.user)?void 0:t.username)?e:n("guest"))+"."}),Object(ie.jsx)(pe.default,{icon:"cog",size:30,style:Fn.settingsIcon,onPress:Ke.settingsOpenState.toggle})]})})})),Fn=le.default.create({container:{width:"100%",minHeight:250,borderBottomLeftRadius:24,borderBottomRightRadius:24,overflow:"hidden"},textOverlay:{flex:1,paddingTop:60,paddingLeft:30,backgroundColor:"rgba(40,40,40, 0.5)"},settingsIcon:{position:"absolute",top:40,right:5}}),Hn=Bn,zn=n(190),Un=n(27);function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nn=Object(me.observer)((function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"home.statistics"}).t,t=function(t){return void 0!==t?t.toString():e("nullValue")},n=Ke.statistics.lastResult;return Object(ie.jsxs)(zn.default,{style:_n.container,children:[Object(ie.jsx)(zn.default.Title,{title:e("title"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(ie.jsx)(Un.Avatar.Icon,Wn(Wn({},e),{},{icon:"chart-donut",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}}))}}),Object(ie.jsxs)(zn.default.Content,{children:[Object(ie.jsx)(Un.List.Item,{title:t(null==n?void 0:n.users),description:e("stats.users"),left:function(e){return Object(ie.jsx)(Un.List.Icon,Wn(Wn({},e),{},{icon:"account-group"}))},style:_n.itemStyle}),Object(ie.jsx)(Un.List.Item,{title:t(null==n?void 0:n.openTrees),description:e("stats.trees"),left:function(e){return Object(ie.jsx)(Un.List.Icon,Wn(Wn({},e),{},{icon:"pine-tree"}))},style:_n.itemStyle}),Object(ie.jsx)(Un.List.Item,{title:t(null==n?void 0:n.stories),description:e("stats.stories"),left:function(e){return Object(ie.jsx)(Un.List.Icon,Wn(Wn({},e),{},{icon:"book-open-variant"}))},style:_n.itemStyle}),Object(ie.jsx)(Un.List.Item,{title:t(null==n?void 0:n.sentences),description:e("stats.sentences"),left:function(e){return Object(ie.jsx)(Un.List.Icon,Wn(Wn({},e),{},{icon:"send"}))},style:_n.itemStyle})]})]})})),_n=le.default.create({container:{marginTop:20,backgroundColor:"#323232"},itemStyle:{paddingVertical:0}}),Yn=Nn;function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gn=Object(me.observer)((function(){var e=Object(Mn.useNavigation)(),t=Object(d.useTranslation)("screens",{keyPrefix:"home.dailyStory"}).t;return Object(ie.jsx)(zn.default,{style:Kn.container,onPress:function(){var t,n=null==(t=Ke.dailyStory.lastResult)?void 0:t.id;gt()(void 0!==n),e.navigate("StoryViewer",{storyId:n})},children:Object(ie.jsx)(zn.default.Title,{title:t("title"),subtitle:t("subtitle"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(ie.jsx)(Un.Avatar.Icon,Zn(Zn({},e),{},{icon:"calendar-today",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}}))}})})})),Kn=le.default.create({container:{marginTop:20,backgroundColor:"#323232"}}),Qn=Gn,Xn=le.default.create({container:{marginTop:20,backgroundColor:"#323232"}}),er=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"home.myLibrary"}).t,t=Object(Mn.useNavigation)();return Object(ie.jsx)(zn.default,{style:Xn.container,onPress:function(){null!==Ut.user?t.navigate("Library"):t.navigate("Login")},children:Object(ie.jsx)(zn.default.Title,{title:e("title"),subtitle:e("subtitle"),titleVariant:"titleLarge",titleStyle:{fontWeight:"bold"},right:function(e){return Object(ie.jsx)(Un.Avatar.Icon,{icon:"bookshelf",color:"whitesmoke",size:48,style:{backgroundColor:"transparent"}})}})})},tr=n(320),nr=n(242);function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=Object(me.observer)((function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"home.settingsSheet"}).t,t=Object(Mn.useNavigation)();return Object(ie.jsxs)(Oe,{title:e("title"),onClose:Ke.settingsOpenState.close,open:Ke.settingsOpenState.isOpen,animationDuration:250,scrollViewProps:{style:{padding:10}},children:[Ut.user&&Object(ie.jsx)(Un.List.Item,{title:Ut.user.username,description:Ut.user.email,left:function(e){return Object(ie.jsx)(Un.List.Icon,ir(ir({},e),{},{icon:"account"}))},style:{marginBottom:10}}),Object(ie.jsxs)(Un.List.Section,{children:[Object(ie.jsx)(Un.List.Subheader,{children:e("actions")}),Object(ie.jsx)(Un.List.Item,{title:e("about"),left:function(e){return Object(ie.jsx)(Un.List.Icon,ir(ir({},e),{},{icon:"information"}))},onPress:function(){Ke.settingsOpenState.close(),t.navigate("Onboarding")}}),Object(ie.jsx)(Un.List.Item,{title:e("support"),left:function(e){return Object(ie.jsx)(Un.List.Icon,ir(ir({},e),{},{icon:"face-agent"}))},onPress:function(){nr.default.canOpenURL("https://www.baptech.fr/").then((function(e){e&&nr.default.openURL("https://www.baptech.fr/").catch(console.error)})).catch(console.error)}}),Ut.loggedIn&&Object(ie.jsx)(Un.List.Item,{title:e("logout"),left:function(e){return Object(ie.jsx)(Un.List.Icon,ir(ir({},e),{},{icon:"logout"}))},onPress:function(){Ie(Ut.logout(),{successMessage:e("logoutSuccess"),onSuccess:Ke.settingsOpenState.close,errorMessage:!0})}})]}),Ut.loggedIn&&Object(ie.jsxs)(Un.List.Section,{style:{borderWidth:1,borderColor:"rgba(255, 77, 77, .5)",marginTop:20},children:[Object(ie.jsx)(Un.List.Subheader,{children:e("dangerZone")}),Object(ie.jsx)(Un.List.Item,{title:e("deleteAccount"),left:function(e){return Object(ie.jsx)(Un.List.Icon,ir(ir({},e),{},{icon:"delete"}))},onPress:function(){tr.default.alert(e("accountDeletionAlert.title"),e("accountDeletionAlert.description"),[{text:e("accountDeletionAlert.cancel"),style:"cancel"},{text:e("accountDeletionAlert.submit"),style:"destructive",onPress:function(){Ie(Ut.deleteAccount(),{successMessage:e("accountDeletionSuccess"),errorMessage:!0})}}])}})]})]})})),or=Object(me.observer)((function(e){return Object(ie.jsxs)(de.default,{style:sr.container,children:[Object(ie.jsxs)(fe.default,{refreshControl:Object(ie.jsx)(Qt.default,{refreshing:Ke.dailyStory.loading||Ke.statistics.loading,onRefresh:function(){Ie(Ke.pullRefresh(),{successMessage:null,errorMessage:!0})}}),children:[Object(ie.jsx)(Hn,{}),Object(ie.jsxs)(de.default,{style:sr.cardsContainer,children:[Ke.dailyStory.lastResult&&Object(ie.jsx)(Qn,{}),Object(ie.jsx)(er,{}),Object(ie.jsx)(Yn,{})]})]}),Object(ie.jsx)(En,{}),Object(ie.jsx)(ar,{})]})})),sr=le.default.create({container:{flex:1},cardsContainer:{paddingHorizontal:10},fab:{position:"absolute",right:40,bottom:50}}),lr=or,cr=n(84),ur=n(127),dr=n(452),fr=n(99),br=n(68),pr=br.object().shape({email:br.string().email().required(),password:br.string().required()}),mr=le.default.create({container:{flex:1},formContainer:{marginHorizontal:20},headline:{marginBottom:20},textField:{marginVertical:5},button:{marginTop:20}}),hr=function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"login"}).t,r=Object(dr.default)();return Object(ie.jsx)(cr.default,{style:mr.container,children:Object(ie.jsx)(ur.default,{behavior:"ios"===ve.default.OS?"padding":"height",keyboardVerticalOffset:r,style:{flex:1,justifyContent:"center"},children:Object(ie.jsx)(fr.Formik,{initialValues:{email:"",password:""},validationSchema:pr,onSubmit:function(e){return wn.default.dismiss(),Ie(Ut.login(e),{successMessage:null,errorMessage:!0,onSuccess:function(){t.reset({index:0,routes:[{name:"Home"}]})}})},children:function(e){var r=e.handleChange,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ie.jsxs)(de.default,{style:mr.formContainer,children:[Object(ie.jsxs)(de.default,{style:mr.headline,children:[Object(ie.jsx)(be.default,{variant:"headlineLarge",children:n("form.headlineTitle")}),Object(ie.jsx)(be.default,{variant:"titleSmall",children:n("form.headlineDescription")})]}),Object(ie.jsx)(kn.default,{label:n("form.email"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(ie.jsx)(kn.default.Icon,{icon:"email"}),style:mr.textField,value:a.email,onChangeText:r("email"),error:Boolean(o.email)&&s.email}),Object(ie.jsx)(kn.default,{label:n("form.password"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(ie.jsx)(kn.default.Icon,{icon:"lock"}),style:mr.textField,value:a.password,onChangeText:r("password"),error:Boolean(o.password)&&s.password}),Object(ie.jsx)(Cn.default,{mode:"contained",style:mr.button,disabled:l,loading:l,onPress:function(){i()},children:n("form.submit")}),Object(ie.jsx)(Cn.default,{mode:"outlined",style:mr.button,onPress:function(){t.navigate("Register")},children:n("form.register")}),Object(ie.jsx)(Cn.default,{mode:"text",style:mr.button,onPress:function(){return t.navigate("ForgotPassword")},children:n("form.forgotPassword")})]})}})})})},gr=n(260);function yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jr=br.object().shape({username:br.string().min(2).max(24).matches(F).required(),email:br.string().email().required(),password:br.string().min(4).required()}),Or=le.default.create({container:{flex:1},formContainer:{marginHorizontal:20},headline:{marginBottom:20},textField:{marginVertical:5},button:{marginTop:20}}),vr=function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"register"}).t,r=Object(dr.default)(),i=a.a.useState(!1),o=on()(i,2),s=o[0],l=o[1],c=a.a.useRef(null);return Object(ie.jsxs)(cr.default,{style:Or.container,children:[Object(ie.jsx)(ur.default,{behavior:"ios"===ve.default.OS?"padding":"height",keyboardVerticalOffset:r,style:{flex:1,justifyContent:"center"},children:Object(ie.jsx)(fr.Formik,{initialValues:{username:"",email:"",password:""},validationSchema:jr,onSubmit:function(e){var t=e.email;return wn.default.dismiss(),c.current=e,Ie(Ut.verifyEmail({email:t}),{successMessage:null,onSuccess:function(){return l(!0)},errorMessage:!0})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ie.jsxs)(de.default,{style:Or.formContainer,children:[Object(ie.jsxs)(de.default,{style:Or.headline,children:[Object(ie.jsx)(be.default,{variant:"headlineLarge",children:n("form.headlineTitle")}),Object(ie.jsx)(be.default,{variant:"titleSmall",children:n("form.headlineDescription")})]}),Object(ie.jsx)(kn.default,{label:n("form.username"),mode:"outlined",textContentType:"username",right:Object(ie.jsx)(kn.default.Icon,{icon:"account-circle"}),value:a.username,onChangeText:t("username"),onBlur:r("username"),error:Boolean(o.username)&&s.username}),Object(ie.jsx)(gr.default,{type:"info",children:n("form.usernameHelper")}),Object(ie.jsx)(kn.default,{label:n("form.email"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(ie.jsx)(kn.default.Icon,{icon:"email"}),style:Or.textField,value:a.email,onChangeText:t("email"),onBlur:r("email"),error:Boolean(o.email)&&s.email}),Object(ie.jsx)(kn.default,{label:n("form.password"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(ie.jsx)(kn.default.Icon,{icon:"lock"}),style:Or.textField,value:a.password,onChangeText:t("password"),onBlur:r("password"),error:Boolean(o.password)&&s.password}),Object(ie.jsx)(Cn.default,{mode:"contained",style:Or.button,disabled:l,loading:l,onPress:function(){i()},children:n("form.submit")})]})}})}),Object(ie.jsx)(Rn,{visible:s,codeLength:6,onResendCode:function(){var e,t=null==(e=c.current)?void 0:e.email;gt()(void 0!==t),Ie(Ut.resendEmailVerificationCode({email:t}),{successMessage:null,errorMessage:!0})},onCodeCompleted:function(e){gt()(null!==c.current),Ie(Ut.register(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({emailValidationCode:e},c.current)),{successMessage:n("form.registerSuccess"),onSuccess:function(){l(!1),t.navigate("Login")},errorMessage:!0})}})]})},xr=br.object().shape({email:br.string().email().required()}),Sr=function(e){var t=e.onEmailSubmited,n=Object(d.useTranslation)("screens",{keyPrefix:"forgotPassword.forgotPasswordForm"}).t;return Object(ie.jsx)(fr.Formik,{initialValues:{email:""},validationSchema:xr,onSubmit:function(e){var n=e.email;return Ie(Ut.forgotPassword({email:n}),{successMessage:null,onSuccess:function(){return t(n)},errorMessage:!0,onError:function(){return wn.default.dismiss()}})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ie.jsxs)(de.default,{children:[Object(ie.jsxs)(de.default,{style:{marginBottom:32},children:[Object(ie.jsx)(be.default,{variant:"headlineLarge",children:n("title")}),Object(ie.jsx)(be.default,{variant:"titleSmall",children:n("subtitle")})]}),Object(ie.jsx)(kn.default,{label:n("emailLabel"),mode:"outlined",keyboardType:"email-address",textContentType:"emailAddress",right:Object(ie.jsx)(kn.default.Icon,{icon:"email"}),value:a.email,onChangeText:t("email"),onBlur:r("email"),error:Boolean(o.email)&&s.email}),Object(ie.jsx)(Cn.default,{mode:"contained",disabled:l,loading:l,onPress:function(){return i()},style:{marginTop:32},children:n("submit")})]})}})};function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kr=br.object().shape({newPassword:br.string().min(4).required(),validationCode:br.string().min(8).required()}),Cr=function(e){var t=e.email,n=Object(d.useTranslation)("screens",{keyPrefix:"forgotPassword.resetPasswordForm"}).t,r=Object(Mn.useNavigation)();return Object(ie.jsx)(fr.Formik,{initialValues:{newPassword:"",validationCode:""},validationSchema:kr,onSubmit:function(e){return Ie(Ut.resetPassword(Pr(Pr({},e),{},{email:t})),{successMessage:null,onSuccess:function(){return r.navigate("Login")},errorMessage:!0,onError:function(){return wn.default.dismiss()}})},children:function(e){var t=e.handleChange,r=e.handleBlur,i=e.handleSubmit,a=e.values,o=e.errors,s=e.touched,l=e.isSubmitting;return Object(ie.jsxs)(de.default,{children:[Object(ie.jsxs)(de.default,{style:{marginBottom:32},children:[Object(ie.jsx)(be.default,{variant:"headlineLarge",children:n("title")}),Object(ie.jsx)(be.default,{variant:"titleSmall",children:n("subtitle")})]}),Object(ie.jsx)(kn.default,{label:n("newPasswordLabel"),mode:"outlined",secureTextEntry:!0,textContentType:"password",right:Object(ie.jsx)(kn.default.Icon,{icon:"lock"}),value:a.newPassword,onChangeText:t("newPassword"),onBlur:r("newPassword"),error:Boolean(o.newPassword)&&s.newPassword}),Object(ie.jsx)(kn.default,{label:n("validationCodeLabel"),mode:"outlined",autoCapitalize:"characters",right:Object(ie.jsx)(kn.default.Icon,{icon:"numeric"}),maxLength:8,value:a.validationCode,onChangeText:t("validationCode"),onBlur:r("validationCode"),error:Boolean(o.validationCode)&&s.validationCode,style:{marginTop:10}}),Object(ie.jsx)(Cn.default,{mode:"contained",disabled:l,loading:l,onPress:function(){return i()},style:{marginTop:32},children:n("submit")})]})}})},Ir=le.default.create({container:{flex:1,justifyContent:"center",paddingHorizontal:20}}),Lr=function(e){var t=Object(dr.default)(),n=a.a.useState(null),r=on()(n,2),i=r[0],o=r[1];return Object(ie.jsx)(cr.default,{style:{flex:1},children:Object(ie.jsx)(ur.default,{behavior:"ios"===ve.default.OS?"padding":"height",keyboardVerticalOffset:t,style:{flex:1},children:Object(ie.jsx)(de.default,{style:Ir.container,children:null===i?Object(ie.jsx)(Sr,{onEmailSubmited:function(e){o(e)}}):Object(ie.jsx)(Cr,{email:i})})})})},Tr=n(55),Ar=le.default.create({container:{flex:1},image:{flex:.7,width:"100%",resizeMode:"contain"},texts:{flex:.3,alignItems:"center"},title:{marginBottom:20,fontSize:32,fontWeight:"bold",color:"whitesmoke",textAlign:"center"},description:{paddingHorizontal:40,fontSize:16,fontWeight:"500",color:"whitesmoke",textAlign:"justify"}}),Rr=function(e){var t=e.image,n=e.title,r=e.description,i=Object(ue.default)().width,a=Object(Mn.useNavigation)();return Object(ie.jsxs)(de.default,{style:[Ar.container,{width:i}],children:[Object(ie.jsx)(Tr.default,{source:t,style:Ar.image}),Object(ie.jsxs)(de.default,{style:Ar.texts,children:[Object(ie.jsx)(ln.default,{style:Ar.title,children:n}),void 0!==r?Object(ie.jsx)(ln.default,{style:Ar.description,children:r}):Object(ie.jsx)(pe.default,{icon:"arrow-right-circle",iconColor:"whitesmoke",size:96,onPress:function(){Wt.saveOnboardingCompleted().catch(console.error),a.replace("Home")}})]})]})},Dr=le.default.create({container:{flexDirection:"row",height:64},dot:{width:10,height:10,borderRadius:5,backgroundColor:"whitesmoke",marginHorizontal:5}}),Mr=function(e){var t=e.itemsCount,n=e.currentItemIdx;return Object(ie.jsx)(de.default,{style:Dr.container,children:Array.from({length:t},(function(e,t){return Object(ie.jsx)(de.default,{style:[Dr.dot,{opacity:t===n?1:.5}]},t)}))})};function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Er=le.default.create({container:{flex:1,alignItems:"center"}}),qr=function(){var e=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"onboarding"}).t;return[{image:H.onboarding.slide1,title:e("slide1.title"),description:e("slide1.description")},{image:H.onboarding.slide2,title:e("slide2.title"),description:e("slide2.description")},{image:H.onboarding.slide3,title:e("slide3.title"),description:e("slide3.description")},{image:H.onboarding.slide4,title:e("slide4.title"),description:e("slide4.description")},{image:H.onboarding.slide5,title:e("slide5.title"),description:e("slide5.description")},{image:H.onboarding.slide6,title:e("slide6.title")}]}(),t=a.a.useState(0),n=on()(t,2),r=n[0],i=n[1],o=a.a.useCallback((function(e){var t,n;return i(null!=(t=null==(n=e.viewableItems.at(0))?void 0:n.index)?t:null)}),[]);return Object(ie.jsxs)(de.default,{style:Er.container,children:[Object(ie.jsx)(tn.default,{data:e,renderItem:function(e){var t=e.item;return Object(ie.jsx)(Rr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))},horizontal:!0,pagingEnabled:!0,bounces:!1,showsHorizontalScrollIndicator:!1,onViewableItemsChanged:o,viewabilityConfig:{viewAreaCoveragePercentThreshold:50}}),Object(ie.jsx)(Mr,{itemsCount:e.length,currentItemIdx:r})]})},Br=function(e){return Object(ie.jsx)(qr,{})};var Fr,Hr=n(261),zr=le.default.create({container:{flexDirection:"row",alignItems:"center"},progressBar:{width:64,marginHorizontal:8},label:{color:"rgba(245,245,245, .75)"}}),Ur=function(e){var t=e.maxCharsCount,n=e.currentCharsCount,r=n/t;return Object(ie.jsxs)(de.default,{style:zr.container,children:[Object(ie.jsx)(Hr.default,{progress:r,style:zr.progressBar}),Object(ie.jsx)(be.default,{variant:"labelLarge",style:zr.label,children:t-n})]})},$r=br.object().shape({text:br.string().min(3).max(180).required("Required")}),Wr=le.default.create({container:{position:"absolute",bottom:0,left:0,width:"100%",paddingHorizontal:4},textInput:{width:"100%",maxHeight:200},controlsContainer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:5}}),Nr=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"partialStory"}).t,t=Object(Mn.useNavigation)(),n=function(){var e=a.a.useState(!1),t=on()(e,2),n=t[0],r=t[1];return a.a.useEffect((function(){var e=wn.default.addListener("keyboardWillShow",(function(){return r(!0)})),t=wn.default.addListener("keyboardWillHide",(function(){return r(!1)}));return function(){e.remove(),t.remove()}}),[]),n}();return Object(ie.jsx)(fr.Formik,{initialValues:{text:""},validationSchema:$r,onSubmit:function(e,n){var r=e.text,i=rt.lastSentence;return gt()(i),wn.default.dismiss(),Ie(gn.create({text:r,parentSentenceId:i.id}),{successMessage:null,onSuccess:function(){n.resetForm(),t.navigate("ParticipationSuccess")},errorMessage:!0})},children:function(t){var r=t.handleSubmit,i=t.handleChange,a=t.handleBlur,o=t.isSubmitting,s=t.values,l=t.errors,c=t.touched;return Object(ie.jsxs)(de.default,{style:Wr.container,children:[Object(ie.jsx)(kn.default,{style:Wr.textInput,mode:"outlined",placeholder:e("write"),multiline:!0,maxLength:180,value:s.text,onChangeText:i("text"),onBlur:a("text"),error:Boolean(l.text)&&c.text}),(n||!xe)&&Object(ie.jsxs)(de.default,{style:Wr.controlsContainer,children:[Object(ie.jsx)(Ur,{maxCharsCount:180,currentCharsCount:s.text.length}),Object(ie.jsx)(pe.default,{icon:"send",disabled:o,onPress:function(){return r()}})]})]})}})},_r=Object(me.observer)((function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"partialStory"}).t,r=Object(dr.default)();return Object(ie.jsx)(cr.default,{style:Yr.safeAreaView,children:Object(ie.jsx)(ur.default,{style:Yr.keyboardAvoidingView,behavior:"ios"===ve.default.OS?"padding":"height",keyboardVerticalOffset:r,children:Object(ie.jsxs)(de.default,{style:Yr.container,children:[Object(ie.jsx)(Sn,{style:Yr.sentenceList,data:rt.partialStory.result,onReport:function(){return t.navigate("ParticipationSuccess")},onMarkedCompleted:function(){return t.navigate("ParticipationSuccess")},ListHeaderComponent:Object(ie.jsx)(be.default,{variant:"labelMedium",style:Yr.listInfoHeader,children:n("listInfoHeader")})}),Object(ie.jsx)(Nr,{})]})})})})),Yr=le.default.create({safeAreaView:{flex:1},keyboardAvoidingView:{flex:1},container:{flex:1},sentenceList:{paddingHorizontal:20},listInfoHeader:{textAlign:"center",marginVertical:20}}),Jr=_r,Zr=le.default.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"mediumseagreen"},title:{fontWeight:"bold",marginVertical:4,color:"whitesmoke"},buttonsContainer:{marginTop:64},button:{marginVertical:16,backgroundColor:"whitesmoke"},buttonText:{color:"mediumseagreen"}}),Gr=function(e){var t=e.navigation,n=Object(d.useTranslation)("screens",{keyPrefix:"participationSuccess"}).t;return Object(ie.jsxs)(cr.default,{style:Zr.container,children:[Object(ie.jsx)(pe.default,{icon:"check-circle-outline",iconColor:"whitesmoke",size:100}),Object(ie.jsx)(be.default,{variant:"headlineLarge",style:Zr.title,children:n("title")}),Object(ie.jsxs)(de.default,{style:Zr.buttonsContainer,children:[Object(ie.jsx)(Cn.default,{style:Zr.button,mode:"contained",onPress:function(){return t.navigate("PartialStory")},children:Object(ie.jsx)(be.default,{variant:"titleLarge",style:[Zr.buttonText,{fontWeight:"bold"}],children:n("partialStoryLink")})}),Object(ie.jsx)(Cn.default,{style:Zr.button,mode:"contained",onPress:function(){return t.navigate("Home")},children:Object(ie.jsx)(be.default,{variant:"titleMedium",style:Zr.buttonText,children:n("homeLink")})})]})]})},Kr=Object($e.gql)(Fr||(Fr=Ue()(["\nquery GetStory ($storyId: Int!) {\n  public {\n    story(storyId: $storyId) {\n      id\n      sentences {\n        id\n        text\n        parentSentenceId\n        owner {\n          id\n          username\n        }\n        createdAt\n      }\n      createdAt\n    }\n  }\n}\n"])));function Qr(e){return Xr.apply(this,arguments)}function Xr(){return(Xr=M()((function*(e){return(yield J.query({query:Kr,variables:e})).data.public.story}))).apply(this,arguments)}var ei=new(function(){function e(){Q()(this,e),this.story=new Be(Qr,{catchUnhandled:console.error})}return ee()(e,[{key:"refresh",value:function(){var e=M()((function*(e){yield this.story.ensureSuccessReload({storyId:e})}));return function(t){return e.apply(this,arguments)}}()}]),e}()),ti=Object(me.observer)((function(e){var t=e.route.params.storyId;Object(Mn.useFocusEffect)(a.a.useCallback((function(){Ie(ei.refresh(t),{successMessage:null,errorMessage:!0})}),[t]));var n=Object(d.useTranslation)("screens",{keyPrefix:"storyViewer"}).t,r=ei.story.result;return Object(ie.jsx)(cr.default,{style:ni.container,children:Object(ie.jsx)(Sn,{data:null==r?void 0:r.sentences,disableControls:!0,style:ni.sentencesList,ListHeaderComponent:void 0!==(null==r?void 0:r.createdAt)?Object(ie.jsx)(be.default,{variant:"labelMedium",style:ni.dateHeader,children:n("completedTitle")+" "+Object(sn.default)(r.createdAt,n("dateFormat"))}):null})})})),ni=le.default.create({container:{flex:1},sentencesList:{paddingHorizontal:20},dateHeader:{textAlign:"center",marginVertical:20}}),ri=ti,ii=le.default.create({card:{marginBottom:20}}),ai=function(e){var t=e.story,n=t.id,r=t.title,i=t.createdAt,a=Object(d.useTranslation)("screens",{keyPrefix:"library"}).t,o=Object(Mn.useNavigation)();return Object(ie.jsx)(zn.default,{style:ii.card,onPress:function(){return o.navigate("StoryViewer",{storyId:n})},children:Object(ie.jsx)(zn.default.Title,{title:r,titleVariant:"bodyLarge",subtitle:Object(sn.default)(i,a("misc.dateFormat")),subtitleVariant:"labelSmall"})})},oi=le.default.create({container:{flex:1,alignItems:"center",paddingTop:50},image:{width:200,height:200,resizeMode:"contain"}}),si=function(){var e=Object(d.useTranslation)("screens",{keyPrefix:"library"}).t;return Object(ie.jsxs)(de.default,{style:oi.container,children:[Object(ie.jsx)(Tr.default,{source:H.misc.empty,style:oi.image}),Object(ie.jsx)(be.default,{variant:"titleLarge",children:e("emptyLibrary")})]})},li=Object(me.observer)((function(e){var t=Object(d.useTranslation)("screens",{keyPrefix:"library"}).t;return Object(ie.jsxs)(de.default,{style:ci.container,children:[Object(ie.jsx)(tn.default,{data:ut.stories.result,renderItem:function(e){var t=e.item;return Object(ie.jsx)(ai,{story:t})},keyExtractor:function(e){return e.id.toString()},refreshControl:Object(ie.jsx)(Qt.default,{refreshing:ut.stories.loading,onRefresh:function(){Ie(ut.refresh(),{successMessage:null,errorMessage:!0})}}),ListHeaderComponent:Object(ie.jsx)(be.default,{variant:"labelLarge",style:ci.infoText,children:t("pageInfo",{sentencesCount:ut.mySentencesCount.lastResult})}),ListEmptyComponent:Object(ie.jsx)(si,{})}),Object(ie.jsx)(En,{})]})})),ci=le.default.create({container:{flex:1,paddingHorizontal:10},infoText:{marginVertical:24}}),ui=li,di=Object(ke.default)(),fi=Object(me.observer)((function(){var e=Object(d.useTranslation)("common",{keyPrefix:"app"}).t;return Jt.loading?Object(ie.jsx)(Kt,{}):Object(ie.jsx)(Pe.default,{children:Object(ie.jsxs)(di.Navigator,{initialRouteName:Wt.onboardingCompleted?"Home":"Onboarding",screenOptions:{headerStyle:{backgroundColor:"#2b2b2b"},headerBackTitle:e("backTitle"),headerTitleStyle:{fontWeight:"bold",fontSize:20,color:"#fafafa"},contentStyle:{backgroundColor:"#2b2b2b"}},children:[Object(ie.jsx)(di.Screen,{name:"Home",component:lr,options:{headerShown:!1},listeners:{focus:dt}}),Object(ie.jsx)(di.Screen,{name:"Login",component:hr,options:{title:e("screens.login")}}),Object(ie.jsx)(di.Screen,{name:"Register",component:vr,options:{title:e("screens.register")}}),Object(ie.jsx)(di.Screen,{name:"ForgotPassword",component:Lr,options:{title:e("screens.forgotPassword")}}),Object(ie.jsx)(di.Screen,{name:"Onboarding",component:Br,options:{headerShown:!1}}),Object(ie.jsx)(di.Screen,{name:"PartialStory",component:Jr,options:{title:e("screens.partialStory")},listeners:{focus:ft}}),Object(ie.jsx)(di.Screen,{name:"ParticipationSuccess",component:Gr,options:{headerShown:!1}}),Object(ie.jsx)(di.Screen,{name:"StoryViewer",component:ri,options:{title:e("screens.storyViewer")}}),Object(ie.jsx)(di.Screen,{name:"Library",component:ui,options:{title:e("screens.library")},listeners:{focus:bt}})]})})}));Object(o.default)((function(){return Object(ie.jsx)(l.ApolloProvider,{client:J,children:Object(ie.jsx)(c.default,{children:Object(ie.jsxs)(we,{children:[Object(ie.jsx)(fi,{}),Object(ie.jsx)(ae,{}),Object(ie.jsx)(s.StatusBar,{style:"auto"})]})})})}))}},[[352,1,2]]]);
//# sourceMappingURL=app.e7222258.chunk.js.map